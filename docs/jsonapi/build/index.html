
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">

    <!-- Always force latest IE rendering engine or request Chrome Frame -->
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">

    <!-- Use title if it's in the page YAML frontmatter -->
    <title>Flapjack API Reference</title>

    <link href="stylesheets/screen.css" media="screen" rel="stylesheet" type="text/css" />
    <link href="stylesheets/print.css" media="print" rel="stylesheet" type="text/css" />
    <script src="http://code.jquery.com/jquery-1.10.1.min.js"></script>
    <script src="javascripts/all.js" type="text/javascript"></script>

    <script>
      $(function() {
        var toc = $("#toc").tocify({
          selectors: "h1,h2",
          extendPage: false,
          theme: "none",
          smoothScroll: false,
          showEffectSpeed: 0,
          hideEffectSpeed: 180,
          ignoreSelector: ".toc-ignore",
          hashGenerator: 'pretty',
          highlightOffset: 60,
          scrollTo: -2,
          scrollHistory: true,
          hashGenerator: function(text, element) {
            return element[0].getAttribute('id');
          }
        }).data("toc-tocify");
        // Hack to make already open sections to start opened,
        // instead of displaying an ugly animation
        setTimeout(function() {
          toc.setOption("showEffectSpeed", 180);
        },50);
        setupLanguages([
          
            
              
                'shell',
              
            
              
                'ruby',
              
            
          
        ]);
      });
    </script>
  </head>

  <body class="index">
    <div class="tocify-wrapper">
      <a href="/">
        <img src="images/logo.png" />
      </a>
      <div id="toc">
      </div>
      
    </div>
    <div class="page-wrapper">
      <div class="content">
          <h1 id="introduction">Introduction</h1>

<p>Welcome to the documention of the JSON API of <a href="http://flapjack.io">Flapjack</a>.</p>

<p>See the <a href="https://github.com/flpjck/flapjack-diner/">flapjack-diner</a> RubyGem which provides a Ruby consumer of this API.</p>

<h2 id="required-http-headers">Required HTTP Headers</h2>

<p>JSON API requires the <code class="prettyprint">Content-Type</code> header to be set as follows. The <code class="prettyprint">Accept</code> header is not required but recommended when the client expects a JSON response body.</p>

<h3 id="get">GET</h3>

<p><code class="prettyprint">Accept: application/vnd.api+json</code></p>

<h3 id="post">POST</h3>

<p><code class="prettyprint">Content-Type: application/json</code> or
<code class="prettyprint">Content-Type: application/vnd.api+json</code></p>

<p><code class="prettyprint">Accept: application/vnd.api+json</code></p>

<h3 id="patch">PATCH</h3>

<p><code class="prettyprint">Content-Type: application/json-patch+json</code></p>

<p><code class="prettyprint">Accept: application/vnd.api+json</code></p>

<h3 id="delete">DELETE</h3>

<p>No specific headers required.</p>

<h2 id="relevant-specifications">Relevant Specifications</h2>

<ul>
<li><a href="http://jsonapi.org/">JSON API (jsonapi.org)</a></li>
<li><a href="http://tools.ietf.org/html/rfc6902">JSON Patch (RFC 6902)</a></li>
<li><a href="http://www.w3.org/Protocols/rfc2616/rfc2616.html">HTTP 1.1 (RFC 2616)</a></li>
</ul>

  <h1 id="contacts">Contacts</h1>

<p>The Contact resource has the following attributes:</p>

<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>String</td>
<td></td>
</tr>
<tr>
<td>first_name</td>
<td>String</td>
<td></td>
</tr>
<tr>
<td>last_name</td>
<td>String</td>
<td></td>
</tr>
<tr>
<td>email</td>
<td>String</td>
<td></td>
</tr>
<tr>
<td>timezone</td>
<td>String</td>
<td></td>
</tr>
<tr>
<td>tags</td>
<td>Array[String]</td>
<td></td>
</tr>
</tbody></table>

<h2 id="create-contacts">Create contacts</h2>

<p>Creates one or more contacts, returns an array containing the ids of the created contacts. The ordering is preserved, so if you POST an array of three contacts, the resulting array of ids will be in the same order as the posted data; the first item of the POSTed array will correspond to the first id in the resulting array, etc.</p>

<p>Contact ids may optionally be supplied. If it is omitted, then a UUID will be created.</p>

<p>If an id is supplied in any of the included contacts, and any of them clash with an existing contact, the whole request will be rejected and no changes will be written.</p>
<pre class="highlight shell">curl -w <span class="s1">'response: %{http_code} \n'</span> -X POST -H <span class="s2">"Content-Type: application/vnd.api+json"</span> -d <span class="se">\</span>
 <span class="s1">'{
    "contacts": [
      {
        "first_name": "Ada",
        "last_name": "Lovelace",
        "email": "ada@example.com",
        "timezone": "Europe/London",
        "tags": [
          "legend",
          "first computer programmer"
        ]
      }
    ]
  }'</span> <span class="se">\</span>
 http://localhost:3081/contacts
</pre>
<pre class="highlight ruby"><span class="nb">require</span> <span class="s1">'flapjack-diner'</span>
<span class="no">Flapjack</span><span class="o">::</span><span class="no">Diner</span><span class="p">.</span><span class="nf">base_uri</span><span class="p">(</span><span class="s1">'localhost:3081'</span><span class="p">)</span>

<span class="no">Flapjack</span><span class="o">::</span><span class="no">Diner</span><span class="p">.</span><span class="nf">create_contacts</span><span class="p">({</span>
  <span class="ss">:first_name</span> <span class="o">=&gt;</span> <span class="s2">"Ada"</span><span class="p">,</span>
  <span class="ss">:last_name</span>  <span class="o">=&gt;</span> <span class="s2">"Lovelace"</span><span class="p">,</span>
  <span class="ss">:email</span>      <span class="o">=&gt;</span> <span class="s2">"ada@example.com"</span>
<span class="p">})</span>
</pre>

<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json"><span class="p">[</span><span class="s2">"cd40283b-023e-43e2-a79c-1910415afdc2"</span><span class="p">]</span><span class="w">
</span></pre>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">POST /contacts</code></p>

<h3 id="query-parameters">Query Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>contacts</td>
<td>Array[Contact]</td>
<td>An array of Contact resources to create.</td>
</tr>
</tbody></table>

<h3 id="http-return-codes">HTTP Return Codes</h3>

<table><thead>
<tr>
<th>Return code</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>201</td>
<td>The submitted contacts were created successfully.</td>
</tr>
<tr>
<td>405</td>
<td><strong>Error</strong> The submitted contact data was not sent with the JSONAPI MIME type <code class="prettyprint">application/vnd.api+json</code>.</td>
</tr>
<tr>
<td>409</td>
<td><strong>Error</strong> Contacts with ids matching those submitted were found.</td>
</tr>
<tr>
<td>422</td>
<td><strong>Error</strong> The submitted contact data did not conform to the provided specification.</td>
</tr>
</tbody></table>

<h2 id="get-contacts">Get contacts</h2>

<p>If no contact ids are provided then all contacts will be returned; if contact ids
are provided then only the contacts matching those ids will be returned.</p>
<pre class="highlight shell">curl http://localhost:3081/contacts

<span class="c"># or</span>
curl http://localhost:3081/contacts/1

<span class="c"># or</span>
curl http://localhost:3081/contacts/21,22
</pre>
<pre class="highlight ruby"><span class="nb">require</span> <span class="s1">'flapjack-diner'</span>
<span class="no">Flapjack</span><span class="o">::</span><span class="no">Diner</span><span class="p">.</span><span class="nf">base_uri</span><span class="p">(</span><span class="s1">'localhost:3081'</span><span class="p">)</span>

<span class="no">Flapjack</span><span class="o">::</span><span class="no">Diner</span><span class="p">.</span><span class="nf">contacts</span>

<span class="c1"># or</span>
<span class="no">Flapjack</span><span class="o">::</span><span class="no">Diner</span><span class="p">.</span><span class="nf">contacts</span><span class="p">(</span><span class="s1">'21'</span><span class="p">)</span>

<span class="c1"># or</span>
<span class="no">Flapjack</span><span class="o">::</span><span class="no">Diner</span><span class="p">.</span><span class="nf">contacts</span><span class="p">(</span><span class="s1">'21'</span><span class="p">,</span> <span class="s1">'22'</span><span class="p">)</span>
</pre>

<blockquote>
<p>The commands return JSON structured like this, which is broken up by Flapjack::Diner into its constituent hashes:</p>
</blockquote>
<pre class="highlight json"><span class="p">{</span><span class="w">
  </span><span class="s2">"contacts"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"21"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Ada"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Lovelace"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ada@example.com"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"timezone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Europe/London"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"legend"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"first computer programmer"</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="s2">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"entities"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"7"</span><span class="p">,</span><span class="w"> </span><span class="s2">"12"</span><span class="p">,</span><span class="w"> </span><span class="s2">"83"</span><span class="p">],</span><span class="w">
        </span><span class="s2">"media"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"21_email"</span><span class="p">,</span><span class="w"> </span><span class="s2">"21_sms"</span><span class="p">],</span><span class="w">
        </span><span class="s2">"notification_rules"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"30fd36ae-3922-4957-ae3e-c8f6dd27e543"</span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"22"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Charles"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Babbage"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"babbage@example.com"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"timezone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"UTC"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"grump"</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="s2">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"entities"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
        </span><span class="s2">"media"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"22_email"</span><span class="p">,</span><span class="w"> </span><span class="s2">"22_sms"</span><span class="p">],</span><span class="w">
        </span><span class="s2">"notification_rules"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"bfd8be61-3d80-4b95-94df-6e77183ce4e3"</span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">GET /contacts</code></p>

<p><strong>or</strong></p>

<p><code class="prettyprint">GET /contacts/ID[,ID,ID...]</code></p>

<h3 id="query-parameters">Query Parameters</h3>

<p>None.</p>

<h3 id="http-return-codes">HTTP Return Codes</h3>

<table><thead>
<tr>
<th>Return code</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td>OK</td>
</tr>
</tbody></table>

<h2 id="update-contacts">Update contacts</h2>

<p>Update one or more attributes for one or more contact resources.</p>
<pre class="highlight shell">curl -w <span class="s1">'response: %{http_code} \n'</span> -X PATCH -H <span class="s2">"Content-Type: application/json-patch+json"</span> -d <span class="se">\</span>
<span class="s1">'[
  {"op"    : "replace",
   "path"  : "/contacts/0/first_name",
   "value" : "John"},
  {"op"    : "replace",
   "path"  : "/contacts/0/last_name",
   "value" : '</span>Smith<span class="s1">'}
]'</span> <span class="se">\</span>
 <span class="s1">'http://localhost:3081/contacts/23'</span>
</pre>
<pre class="highlight ruby"><span class="nb">require</span> <span class="s1">'flapjack-diner'</span>
<span class="no">Flapjack</span><span class="o">::</span><span class="no">Diner</span><span class="p">.</span><span class="nf">base_uri</span><span class="p">(</span><span class="s1">'localhost:3081'</span><span class="p">)</span>

<span class="no">Flapjack</span><span class="o">::</span><span class="no">Diner</span><span class="p">.</span><span class="nf">update_contacts</span><span class="p">(</span>
  <span class="mi">23</span><span class="p">,</span>
  <span class="ss">:first_name</span> <span class="o">=&gt;</span> <span class="s1">'John'</span><span class="p">,</span>
  <span class="ss">:last_name</span>  <span class="o">=&gt;</span> <span class="s1">'Smith'</span>
<span class="p">)</span>
</pre>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">PATCH /contacts/ID[,ID,ID...]</code></p>

<h3 id="query-parameters">Query Parameters</h3>

<p>Parameters sent for contact updates must form a valid <a href="http://tools.ietf.org/html/rfc6902">JSON Patch (RFC 6902)</a> document. This is comprised of a bare JSON array of JSON-Patch operation objects, which have three members:</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>op</td>
<td>String</td>
<td>one of <em>replace</em> (for attributes), <em>add</em> or <em>remove</em> (for linked objects)</td>
</tr>
<tr>
<td>path</td>
<td>String</td>
<td>&ldquo;/contacts/0/ATTRIBUTE&rdquo; (e.g. &lsquo;first_name&rsquo;) or &ldquo;/contacts/0/links/LINKED_OBJ&rdquo; (e.g. &lsquo;media&rsquo;)</td>
</tr>
<tr>
<td>value</td>
<td>-&gt;</td>
<td>for attributes, a value of the correct data type for that attribute; for linked objects, the String id of that object</td>
</tr>
</tbody></table>

<h3 id="http-return-codes">HTTP Return Codes</h3>

<table><thead>
<tr>
<th>Return code</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>204</td>
<td>The submitted contact updates were made successfully. No content is returned.</td>
</tr>
<tr>
<td>404</td>
<td>Contact resources could not be found for one or more of the provided ids. No contact resources were altered by this request.</td>
</tr>
<tr>
<td>405</td>
<td><strong>Error</strong> The submitted contact data was not sent with the JSON-Patch MIME type <code class="prettyprint">application/json-patch+json</code>.</td>
</tr>
</tbody></table>

<h2 id="delete-contacts">Delete contacts</h2>

<p>Delete one or more contacts.</p>
<pre class="highlight shell">curl -w <span class="s1">'response: %{http_code} \n'</span> -X DELETE <span class="se">\</span>
  <span class="s1">'http://localhost:3081/contacts/21'</span>

<span class="c"># or</span>
curl -w <span class="s1">'response: %{http_code} \n'</span> -X DELETE <span class="se">\</span>
  <span class="s1">'http://localhost:3081/contacts/21,22'</span>
</pre>
<pre class="highlight ruby"><span class="nb">require</span> <span class="s1">'flapjack-diner'</span>
<span class="no">Flapjack</span><span class="o">::</span><span class="no">Diner</span><span class="p">.</span><span class="nf">base_uri</span><span class="p">(</span><span class="s1">'localhost:3081'</span><span class="p">)</span>

<span class="no">Flapjack</span><span class="o">::</span><span class="no">Diner</span><span class="p">.</span><span class="nf">delete_contacts</span><span class="p">(</span><span class="s1">'21'</span><span class="p">)</span>

<span class="c1"># or</span>
<span class="no">Flapjack</span><span class="o">::</span><span class="no">Diner</span><span class="p">.</span><span class="nf">delete_contacts</span><span class="p">(</span><span class="s1">'21'</span><span class="p">,</span> <span class="s1">'22'</span><span class="p">)</span>
</pre>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">DELETE /contacts/ID[,ID,ID...]</code></p>

<h3 id="query-parameters">Query Parameters</h3>

<p>None.</p>

<h3 id="http-return-codes">HTTP Return Codes</h3>

<table><thead>
<tr>
<th>Return code</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>204</td>
<td>Contact(s) were deleted</td>
</tr>
<tr>
<td>404</td>
<td>Contacts could not be found for one or more of the provided ids. No contacts were deleted by this request.</td>
</tr>
</tbody></table>

  <h1 id="media">Media</h1>

<p>The Medium resource has the following attributes:</p>

<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>type</td>
<td>String</td>
<td><code class="prettyprint">email</code>, <code class="prettyprint">sms</code>, or <code class="prettyprint">jabber</code></td>
</tr>
<tr>
<td>address</td>
<td>String</td>
<td></td>
</tr>
<tr>
<td>interval</td>
<td>Integer</td>
<td></td>
</tr>
<tr>
<td>rollup_threshold</td>
<td>Integer</td>
<td></td>
</tr>
</tbody></table>

<h2 id="create-media-for-a-contact">Create media for a contact</h2>
<pre class="highlight shell">curl -w <span class="s1">'response: %{http_code} \n'</span> -X POST -H <span class="s2">"Content-Type: application/vnd.api+json"</span> -d <span class="se">\</span>
 <span class="s1">'{
    "media": [
      {
        "type" : "email",
        "address" : "johns@example.com",
        "interval" : 120,
        "rollup_threshold" : 5
      }
    ]
  }'</span> <span class="se">\</span>
 http://localhost:3081/contacts/5/media
</pre>
<pre class="highlight ruby"><span class="nb">require</span> <span class="s1">'flapjack-diner'</span>
<span class="no">Flapjack</span><span class="o">::</span><span class="no">Diner</span><span class="p">.</span><span class="nf">base_uri</span><span class="p">(</span><span class="s1">'localhost:3081'</span><span class="p">)</span>

<span class="no">Flapjack</span><span class="o">::</span><span class="no">Diner</span><span class="p">.</span><span class="nf">create_contact_media</span><span class="p">(</span>
  <span class="s1">'5'</span><span class="p">,</span>
  <span class="p">{</span>
    <span class="s1">'type'</span>             <span class="o">=&gt;</span> <span class="s1">'email'</span><span class="p">,</span>
    <span class="s1">'address'</span>          <span class="o">=&gt;</span> <span class="s1">'johns@example.com'</span><span class="p">,</span>
    <span class="s1">'interval'</span>         <span class="o">=&gt;</span> <span class="mi">120</span><span class="p">,</span>
    <span class="s1">'rollup_threshold'</span> <span class="o">=&gt;</span> <span class="mi">5</span>
  <span class="p">}</span>
<span class="p">)</span>
</pre>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">POST /contacts/CONTACT_ID/media</code></p>

<h3 id="query-parameters">Query Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>media</td>
<td>Array[Medium]</td>
<td>An array of Medium resources to create.</td>
</tr>
</tbody></table>

<h3 id="http-return-codes">HTTP Return Codes</h3>

<table><thead>
<tr>
<th>Return code</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>201</td>
<td>The submitted media resources were created successfully.</td>
</tr>
<tr>
<td>405</td>
<td><strong>Error</strong> The submitted media data was not sent with the JSONAPI MIME type <code class="prettyprint">application/vnd.api+json</code>.</td>
</tr>
<tr>
<td>409</td>
<td><strong>Error</strong> Media with ids matching those submitted were found.</td>
</tr>
<tr>
<td>422</td>
<td><strong>Error</strong> The submitted media data did not conform to the provided specification.</td>
</tr>
</tbody></table>

<h2 id="get-media">Get media</h2>

<p>If no media ids are provided then all media resources will be returned; if media ids
are provided then only the media resources matching those ids will be returned.</p>

<p>NB: Ids for media resources are currently represented by a String
containing the id of the associated contact, an underscore and then the type
of the medium in question. This is for backwards compatibility, and is due to
some historical design decisions, but is likely to change when the data
handling code is reworked.</p>
<pre class="highlight shell">curl http://localhost:3081/media

<span class="c"># or</span>
curl http://localhost:3081/media/1_email

<span class="c"># or</span>
curl http://localhost:3081/media/21_jabber,22_jabber
</pre>
<pre class="highlight ruby"><span class="nb">require</span> <span class="s1">'flapjack-diner'</span>
<span class="no">Flapjack</span><span class="o">::</span><span class="no">Diner</span><span class="p">.</span><span class="nf">base_uri</span><span class="p">(</span><span class="s1">'localhost:3081'</span><span class="p">)</span>

<span class="no">Flapjack</span><span class="o">::</span><span class="no">Diner</span><span class="p">.</span><span class="nf">media</span>

<span class="c1"># or</span>
<span class="no">Flapjack</span><span class="o">::</span><span class="no">Diner</span><span class="p">.</span><span class="nf">media</span><span class="p">(</span><span class="s1">'1_email'</span><span class="p">)</span>

<span class="c1"># or</span>
<span class="no">Flapjack</span><span class="o">::</span><span class="no">Diner</span><span class="p">.</span><span class="nf">media</span><span class="p">(</span><span class="s1">'21_jabber'</span><span class="p">,</span> <span class="s1">'22_jabber'</span><span class="p">)</span>
</pre>

<blockquote>
<p>The commands return JSON structured like this, which is broken up by Flapjack::Diner into its constituent hashes:</p>
</blockquote>
<pre class="highlight json"><span class="p">{</span><span class="w">
  </span><span class="s2">"media"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"21_sms"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sms"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0123456789"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"interval"</span><span class="p">:</span><span class="w"> </span><span class="mi">300</span><span class="p">,</span><span class="w">
      </span><span class="s2">"rollup_threshold"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
      </span><span class="s2">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"contacts"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"21"</span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"22_email"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"email"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"abcde@example.com"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"interval"</span><span class="p">:</span><span class="w"> </span><span class="mi">180</span><span class="p">,</span><span class="w">
      </span><span class="s2">"rollup_threshold"</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w">
      </span><span class="s2">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"contacts"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"22"</span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">GET /media</code></p>

<p><strong>or</strong></p>

<p><code class="prettyprint">GET /media/ID[,ID,ID...]</code></p>

<h3 id="query-parameters">Query Parameters</h3>

<p>None.</p>

<h3 id="http-return-codes">HTTP Return Codes</h3>

<table><thead>
<tr>
<th>Return code</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td>OK</td>
</tr>
</tbody></table>

<h2 id="update-media">Update media</h2>

<p>Update one or more attributes for one or more media resources.</p>
<pre class="highlight shell">curl -w <span class="s1">'response: %{http_code} \n'</span> -X PATCH -H <span class="s2">"Content-Type: application/json-patch+json"</span> -d <span class="se">\</span>
<span class="s1">'[
  {"op"    : "replace",
   "path"  : "/media/0/address",
   "value" : "0123456789"},
  {"op"    : "replace",
   "path"  : "/media/0/interval",
   "value" : 10}
]'</span> <span class="se">\</span>
 <span class="s1">'http://localhost:3081/media/21_sms'</span>
</pre>
<pre class="highlight ruby"><span class="nb">require</span> <span class="s1">'flapjack-diner'</span>
<span class="no">Flapjack</span><span class="o">::</span><span class="no">Diner</span><span class="p">.</span><span class="nf">base_uri</span><span class="p">(</span><span class="s1">'localhost:3081'</span><span class="p">)</span>

<span class="no">Flapjack</span><span class="o">::</span><span class="no">Diner</span><span class="p">.</span><span class="nf">update_media</span><span class="p">(</span>
  <span class="s1">'21_sms'</span><span class="p">,</span>
  <span class="ss">:address</span>  <span class="o">=&gt;</span> <span class="s1">'0123456789'</span><span class="p">,</span>
  <span class="ss">:interval</span> <span class="o">=&gt;</span> <span class="mi">10</span>
<span class="p">)</span>
</pre>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">PATCH /media/ID[,ID,ID...]</code></p>

<h3 id="query-parameters">Query Parameters</h3>

<p>Parameters sent for medium updates must form a valid <a href="http://tools.ietf.org/html/rfc6902">JSON Patch (RFC 6902)</a> document. This is comprised of a bare JSON array of JSON-Patch operation objects, which have three members:</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>op</td>
<td>String</td>
<td>may only be <em>replace</em></td>
</tr>
<tr>
<td>path</td>
<td>String</td>
<td>&ldquo;/media/0/ATTRIBUTE&rdquo; (e.g. &lsquo;address&rsquo;)</td>
</tr>
<tr>
<td>value</td>
<td>-&gt;</td>
<td>a value of the correct data type for the attribute in the path</td>
</tr>
</tbody></table>

<h3 id="http-return-codes">HTTP Return Codes</h3>

<table><thead>
<tr>
<th>Return code</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>204</td>
<td>The submitted medium updates were made successfully. No content is returned.</td>
</tr>
<tr>
<td>404</td>
<td>Media resources could not be found for one or more of the provided ids. No media resources were altered by this request.</td>
</tr>
<tr>
<td>405</td>
<td><strong>Error</strong> The submitted media data was not sent with the JSON-Patch MIME type <code class="prettyprint">application/json-patch+json</code>.</td>
</tr>
</tbody></table>

<h2 id="delete-media">Delete media</h2>

<p>Delete one or more media resources.</p>
<pre class="highlight shell">curl -w <span class="s1">'response: %{http_code} \n'</span> -X DELETE <span class="se">\</span>
  <span class="s1">'http://localhost:3081/media/11_email'</span>

<span class="c"># or</span>
curl -w <span class="s1">'response: %{http_code} \n'</span> -X DELETE <span class="se">\</span>
  <span class="s1">'http://localhost:3081/media/31_jabber,32_jabber'</span>
</pre>
<pre class="highlight ruby"><span class="nb">require</span> <span class="s1">'flapjack-diner'</span>
<span class="no">Flapjack</span><span class="o">::</span><span class="no">Diner</span><span class="p">.</span><span class="nf">base_uri</span><span class="p">(</span><span class="s1">'localhost:3081'</span><span class="p">)</span>

<span class="no">Flapjack</span><span class="o">::</span><span class="no">Diner</span><span class="p">.</span><span class="nf">delete_media</span><span class="p">(</span><span class="s1">'11_email'</span><span class="p">)</span>

<span class="c1"># or</span>
<span class="no">Flapjack</span><span class="o">::</span><span class="no">Diner</span><span class="p">.</span><span class="nf">delete_media</span><span class="p">(</span><span class="s1">'31_jabber'</span><span class="p">,</span> <span class="s1">'32_jabber'</span><span class="p">)</span>
</pre>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">DELETE /media/ID[,ID,ID...]</code></p>

<h3 id="query-parameters">Query Parameters</h3>

<p>None.</p>

<h3 id="http-return-codes">HTTP Return Codes</h3>

<table><thead>
<tr>
<th>Return code</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>204</td>
<td>The medium/media resources were deleted</td>
</tr>
<tr>
<td>404</td>
<td>Media resources could not be found for one or more of the provided ids. No media resources were deleted by this request.</td>
</tr>
</tbody></table>

  <h1 id="pagerduty-credentials">PagerDuty credentials</h1>

<p>The PagerDuty resource has the following attributes:</p>

<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>service_key</td>
<td>String</td>
<td></td>
</tr>
<tr>
<td>subdomain</td>
<td>String</td>
<td></td>
</tr>
<tr>
<td>username</td>
<td>String</td>
<td></td>
</tr>
<tr>
<td>password</td>
<td>String</td>
<td></td>
</tr>
</tbody></table>

<h2 id="create-pagerduty-credentials-for-a-contact">Create PagerDuty credentials for a contact</h2>
<pre class="highlight shell">curl -w <span class="s1">'response: %{http_code} \n'</span> -X POST -H <span class="s2">"Content-Type: application/vnd.api+json"</span> -d <span class="se">\</span>
 <span class="s1">'{
    "pagerduty_credentials": [
      {
        "service_key" : "567890123456789012345678",
        "subdomain" : "eggs",
        "username" : "flapjack",
        "password" : "tomato"
      }
    ]
  }'</span> <span class="se">\</span>
 http://localhost:3081/contacts/5/pagerduty_credentials
</pre>
<pre class="highlight ruby"><span class="nb">require</span> <span class="s1">'flapjack-diner'</span>
<span class="no">Flapjack</span><span class="o">::</span><span class="no">Diner</span><span class="p">.</span><span class="nf">base_uri</span><span class="p">(</span><span class="s1">'localhost:3081'</span><span class="p">)</span>

<span class="no">Flapjack</span><span class="o">::</span><span class="no">Diner</span><span class="p">.</span><span class="nf">create_contact_pagerduty_credentials</span><span class="p">(</span>
  <span class="s1">'5'</span><span class="p">,</span>
  <span class="p">{</span>
    <span class="s1">'service_key'</span> <span class="o">=&gt;</span> <span class="s1">'567890123456789012345678'</span><span class="p">,</span>
    <span class="s1">'subdomain'</span>   <span class="o">=&gt;</span> <span class="s1">'eggs'</span><span class="p">,</span>
    <span class="s1">'username'</span>    <span class="o">=&gt;</span> <span class="s1">'flapjack'</span><span class="p">,</span>
    <span class="s1">'password'</span>    <span class="o">=&gt;</span> <span class="s1">'tomato'</span>
  <span class="p">}</span>
<span class="p">)</span>
</pre>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">POST /contacts/CONTACT_ID/pagerduty_credentials</code></p>

<h3 id="query-parameters">Query Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>pagerduty_credentials</td>
<td>Array[PagerDuty]</td>
<td>An array of PagerDuty resources to create.</td>
</tr>
</tbody></table>

<h3 id="http-return-codes">HTTP Return Codes</h3>

<table><thead>
<tr>
<th>Return code</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>201</td>
<td>The submitted PagerDuty credentials resources were created successfully.</td>
</tr>
<tr>
<td>405</td>
<td><strong>Error</strong> The submitted PagerDuty credentials data was not sent with the JSONAPI MIME type <code class="prettyprint">application/vnd.api+json</code>.</td>
</tr>
<tr>
<td>422</td>
<td><strong>Error</strong> The submitted PagerDuty credentials data did not conform to the provided specification.</td>
</tr>
</tbody></table>

<h2 id="get-pagerduty-credentials">Get PagerDuty credentials</h2>

<p>If no contact ids are provided then all PagerDuty credentials resources will be returned; if contact ids
are provided then only the PagerDuty credentials resources matching those ids will be returned.</p>
<pre class="highlight shell">curl http://localhost:3081/pagerduty_credentials

<span class="c"># or</span>
curl http://localhost:3081/pagerduty_credentials/1

<span class="c"># or</span>
curl http://localhost:3081/pagerduty_credentials/21,22
</pre>
<pre class="highlight ruby"><span class="nb">require</span> <span class="s1">'flapjack-diner'</span>
<span class="no">Flapjack</span><span class="o">::</span><span class="no">Diner</span><span class="p">.</span><span class="nf">base_uri</span><span class="p">(</span><span class="s1">'localhost:3081'</span><span class="p">)</span>

<span class="no">Flapjack</span><span class="o">::</span><span class="no">Diner</span><span class="p">.</span><span class="nf">pagerduty_credentials</span>

<span class="c1"># or</span>
<span class="no">Flapjack</span><span class="o">::</span><span class="no">Diner</span><span class="p">.</span><span class="nf">pagerduty_credentials</span><span class="p">(</span><span class="s1">'1'</span><span class="p">)</span>

<span class="c1"># or</span>
<span class="no">Flapjack</span><span class="o">::</span><span class="no">Diner</span><span class="p">.</span><span class="nf">pagerduty_credentials</span><span class="p">(</span><span class="s1">'21'</span><span class="p">,</span> <span class="s1">'22'</span><span class="p">)</span>
</pre>

<blockquote>
<p>The commands return JSON structured like this, which is broken up by Flapjack::Diner into its constituent hashes:</p>
</blockquote>
<pre class="highlight json"><span class="p">{</span><span class="w">
  </span><span class="s2">"pagerduty_credentials"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"service_key"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"567890123456789012345678"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"subdomain"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"eggs"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"username"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"flapjack"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"password"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"tomato"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"contacts"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"21"</span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"service_key"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"456789012345678901234567"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"subdomain"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"spam"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"username"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"waffle"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"password"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"eggplant"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"contacts"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"22"</span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">GET /pagerduty_credentials</code></p>

<p><strong>or</strong></p>

<p><code class="prettyprint">GET /pagerduty_credentials/CONTACT_ID[,CONTACT_ID,CONTACT_ID...]</code></p>

<h3 id="query-parameters">Query Parameters</h3>

<p>None.</p>

<h3 id="http-return-codes">HTTP Return Codes</h3>

<table><thead>
<tr>
<th>Return code</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td>OK</td>
</tr>
</tbody></table>

<h2 id="update-pagerduty-credentials">Update PagerDuty credentials</h2>

<p>Update one or more attributes for one or more PagerDuty credentials resources.</p>
<pre class="highlight shell">curl -w <span class="s1">'response: %{http_code} \n'</span> -X PATCH -H <span class="s2">"Content-Type: application/json-patch+json"</span> -d <span class="se">\</span>
<span class="s1">'[
  {"op"    : "replace",
   "path"  : "/pagerduty_credentials/0/username",
   "value" : "genius"},
  {"op"    : "replace",
   "path"  : "/pagerduty_credentials/0/password",
   "value" : "ideas"}
]'</span> <span class="se">\</span>
 <span class="s1">'http://localhost:3081/pagerduty_credentials/21s'</span>
</pre>
<pre class="highlight ruby"><span class="nb">require</span> <span class="s1">'flapjack-diner'</span>
<span class="no">Flapjack</span><span class="o">::</span><span class="no">Diner</span><span class="p">.</span><span class="nf">base_uri</span><span class="p">(</span><span class="s1">'localhost:3081'</span><span class="p">)</span>

<span class="no">Flapjack</span><span class="o">::</span><span class="no">Diner</span><span class="p">.</span><span class="nf">update_pagerduty_credentials</span><span class="p">(</span>
  <span class="s1">'21'</span><span class="p">,</span>
  <span class="ss">:username</span> <span class="o">=&gt;</span> <span class="s1">'genius'</span><span class="p">,</span>
  <span class="ss">:password</span> <span class="o">=&gt;</span> <span class="s1">'ideas'</span>
<span class="p">)</span>
</pre>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">PATCH /pagerduty_credentials/CONTACT_ID[,CONTACT_ID,CONTACT_ID...]</code></p>

<h3 id="query-parameters">Query Parameters</h3>

<p>Parameters sent for PagerDuty credentials updates must form a valid <a href="http://tools.ietf.org/html/rfc6902">JSON Patch (RFC 6902)</a> document. This is comprised of a bare JSON array of JSON-Patch operation objects, which have three members:</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>op</td>
<td>String</td>
<td>may only be <em>replace</em></td>
</tr>
<tr>
<td>path</td>
<td>String</td>
<td>&ldquo;/pagerduty_credentials/0/ATTRIBUTE&rdquo; (e.g. &lsquo;username&rsquo;)</td>
</tr>
<tr>
<td>value</td>
<td>-&gt;</td>
<td>a value of the correct data type for the attribute in the path</td>
</tr>
</tbody></table>

<h3 id="http-return-codes">HTTP Return Codes</h3>

<table><thead>
<tr>
<th>Return code</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>204</td>
<td>The submitted PagerDuty credentials updates were made successfully. No content is returned.</td>
</tr>
<tr>
<td>404</td>
<td>PagerDuty credentials resources could not be found for one or more of the provided contact ids. No PagerDuty credentials resources were altered by this request.</td>
</tr>
<tr>
<td>405</td>
<td><strong>Error</strong> The submitted PagerDuty credentials data was not sent with the JSON-Patch MIME type <code class="prettyprint">application/json-patch+json</code>.</td>
</tr>
</tbody></table>

<h2 id="delete-pagerduty-credentials">Delete PagerDuty credentials</h2>

<p>Delete one or more PagerDuty credentials resources.</p>
<pre class="highlight shell">curl -w <span class="s1">'response: %{http_code} \n'</span> -X DELETE <span class="se">\</span>
  <span class="s1">'http://localhost:3081/pagerduty_credentials/11'</span>

<span class="c"># or</span>
curl -w <span class="s1">'response: %{http_code} \n'</span> -X DELETE <span class="se">\</span>
  <span class="s1">'http://localhost:3081/pagerduty_credentials/31,32'</span>
</pre>
<pre class="highlight ruby"><span class="nb">require</span> <span class="s1">'flapjack-diner'</span>
<span class="no">Flapjack</span><span class="o">::</span><span class="no">Diner</span><span class="p">.</span><span class="nf">base_uri</span><span class="p">(</span><span class="s1">'localhost:3081'</span><span class="p">)</span>

<span class="no">Flapjack</span><span class="o">::</span><span class="no">Diner</span><span class="p">.</span><span class="nf">delete_pagerduty_credentials</span><span class="p">(</span><span class="s1">'11'</span><span class="p">)</span>

<span class="c1"># or</span>
<span class="no">Flapjack</span><span class="o">::</span><span class="no">Diner</span><span class="p">.</span><span class="nf">delete_pagerduty_credentials</span><span class="p">(</span><span class="s1">'31'</span><span class="p">,</span> <span class="s1">'32'</span><span class="p">)</span>
</pre>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">DELETE /pagerduty_credentials/CONTACT_ID[,CONTACT_ID,CONTACT_ID...]</code></p>

<h3 id="query-parameters">Query Parameters</h3>

<p>None.</p>

<h3 id="http-return-codes">HTTP Return Codes</h3>

<table><thead>
<tr>
<th>Return code</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>204</td>
<td>The PagerDuty credentials resources were deleted</td>
</tr>
<tr>
<td>404</td>
<td>PagerDuty credentials could not be found for one or more of the provided contact ids. No PagerDuty credentials were deleted by this request.</td>
</tr>
</tbody></table>

  <h1 id="notification-rules">Notification Rules</h1>

<p>The Notification Rule resource has the following attributes:</p>

<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>String</td>
<td></td>
</tr>
<tr>
<td>contact_id</td>
<td>String</td>
<td></td>
</tr>
<tr>
<td>entities</td>
<td>Array[String]</td>
<td></td>
</tr>
<tr>
<td>regex_entities</td>
<td>Array[String]</td>
<td></td>
</tr>
<tr>
<td>tags</td>
<td>Array[String]</td>
<td></td>
</tr>
<tr>
<td>regex_tags</td>
<td>Array[String]</td>
<td></td>
</tr>
<tr>
<td>time_restrictions</td>
<td></td>
<td></td>
</tr>
<tr>
<td>unknown_media</td>
<td>Array[String]</td>
<td></td>
</tr>
<tr>
<td>warning_media</td>
<td>Array[String]</td>
<td></td>
</tr>
<tr>
<td>critical_media</td>
<td>Array[String]</td>
<td></td>
</tr>
<tr>
<td>unknown_blackhole</td>
<td>Boolean</td>
<td></td>
</tr>
<tr>
<td>warning_blackhole</td>
<td>Boolean</td>
<td></td>
</tr>
<tr>
<td>critical_blackhole</td>
<td>Boolean</td>
<td></td>
</tr>
</tbody></table>

<h2 id="create-notification-rules-for-a-contact">Create notification rules for a contact</h2>
<pre class="highlight shell">curl -w <span class="s1">'response: %{http_code} \n'</span> -X POST -H <span class="s2">"Content-Type: application/vnd.api+json"</span> -d <span class="se">\</span>
 <span class="s1">'{
    "notification_rules": [
      {
        "entities": [
          "foo-app-01.example.com"
        ],
        "regex_entities" : [
          "^foo-\S{3}-\d{2}.example.com$"
        ],
        "tags": [
          "database",
          "physical"
        ],
        "regex_tags" : [],
        "time_restrictions": [
          {
            "start_time": "2013-01-28 08:00:00",
            "end_time": "2013-01-28 18:00:00",
            "rrules": [
              {
                "validations": {
                  "day": [1,2,3,4,5]
                },
                "rule_type": "Weekly",
                "interval": 1,
                "week_start": 0
              }
            ],
            "exrules": [],
            "rtimes": [],
            "extimes": []
          }
        ],
        "unknown_media": [],
        "warning_media": [
          "email"
        ],
        "critical_media": [
          "sms",
          "email"
        ],
        "unknown_blackhole": false,
        "warning_blackhole": false,
        "critical_blackhole": false
      }
    ]
  }'</span> <span class="se">\</span>
http://localhost:3081/contacts/5/notification_rules
</pre>
<pre class="highlight ruby"><span class="nb">require</span> <span class="s1">'flapjack-diner'</span>
<span class="no">Flapjack</span><span class="o">::</span><span class="no">Diner</span><span class="p">.</span><span class="nf">base_uri</span><span class="p">(</span><span class="s1">'localhost:3081'</span><span class="p">)</span>

<span class="no">Flapjack</span><span class="o">::</span><span class="no">Diner</span><span class="p">.</span><span class="nf">create_contact_notification_rules</span><span class="p">(</span>
  <span class="s1">'5'</span><span class="p">,</span>
  <span class="p">{</span>
    <span class="s1">'entities'</span>           <span class="o">=&gt;</span> <span class="o">[</span> <span class="s1">'foo-app-01.example.com'</span> <span class="o">]</span><span class="p">,</span>
    <span class="s1">'regex_entities'</span>     <span class="o">=&gt;</span> <span class="o">[</span> <span class="s1">'^foo-\S{3}-\d{2}.example.com$'</span> <span class="o">]</span><span class="p">,</span>
    <span class="s1">'tags'</span>               <span class="o">=&gt;</span> <span class="o">[</span> <span class="s1">'database'</span><span class="p">,</span> <span class="s1">'physical'</span> <span class="o">]</span><span class="p">,</span>
    <span class="s1">'regex_tags'</span>         <span class="o">=&gt;</span> <span class="kp">nil</span><span class="p">,</span>
    <span class="s1">'time_restrictions'</span>  <span class="o">=&gt;</span> <span class="o">[</span>
      <span class="p">{</span>
        <span class="s1">'start_time'</span> <span class="o">=&gt;</span> <span class="s1">'2013-01-28 08:00:00'</span><span class="p">,</span>
        <span class="s1">'end_time'</span>   <span class="o">=&gt;</span> <span class="s1">'2013-01-28 18:00:00'</span><span class="p">,</span>
        <span class="s1">'rrules'</span>     <span class="o">=&gt;</span> <span class="o">[</span>
          <span class="p">{</span>
            <span class="s1">'validations'</span> <span class="o">=&gt;</span> <span class="p">{</span>
              <span class="s1">'day'</span> <span class="o">=&gt;</span> <span class="o">[</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span> <span class="o">]</span>
              <span class="p">},</span>
            <span class="s1">'rule_type'</span>   <span class="o">=&gt;</span> <span class="s1">'Weekly'</span><span class="p">,</span>
            <span class="s1">'interval'</span>    <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span>
            <span class="s1">'week_start'</span>  <span class="o">=&gt;</span> <span class="mi">0</span>
          <span class="p">}</span>
        <span class="o">]</span><span class="p">,</span>
      <span class="s1">'exrules'</span>       <span class="o">=&gt;</span> <span class="o">[]</span><span class="p">,</span>
      <span class="s1">'rtimes'</span>        <span class="o">=&gt;</span> <span class="o">[]</span><span class="p">,</span>
      <span class="s1">'extimes'</span>       <span class="o">=&gt;</span> <span class="o">[]</span>
      <span class="p">}</span>
    <span class="o">]</span><span class="p">,</span>
    <span class="s1">'unknown_media'</span>      <span class="o">=&gt;</span> <span class="o">[]</span><span class="p">,</span>
    <span class="s1">'warning_media'</span>      <span class="o">=&gt;</span> <span class="o">[</span> <span class="s1">'email'</span> <span class="o">]</span><span class="p">,</span>
    <span class="s1">'critical_media'</span>     <span class="o">=&gt;</span> <span class="o">[</span> <span class="s1">'sms'</span><span class="p">,</span> <span class="s1">'email'</span> <span class="o">]</span><span class="p">,</span>
    <span class="s1">'unknown_blackhole'</span>  <span class="o">=&gt;</span> <span class="kp">false</span><span class="p">,</span>
    <span class="s1">'warning_blackhole'</span>  <span class="o">=&gt;</span> <span class="kp">false</span><span class="p">,</span>
    <span class="s1">'critical_blackhole'</span> <span class="o">=&gt;</span> <span class="kp">false</span>
  <span class="p">}</span>
<span class="p">)</span>
</pre>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">POST /contacts/CONTACT_ID/notification_rules</code></p>

<h3 id="query-parameters">Query Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>notification_rules</td>
<td>Array[NotificationRule]</td>
<td>An array of NotificationRule resources to create.</td>
</tr>
</tbody></table>

<h3 id="http-return-codes">HTTP Return Codes</h3>

<table><thead>
<tr>
<th>Return code</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>201</td>
<td>The submitted notification rule resources were created successfully.</td>
</tr>
<tr>
<td>405</td>
<td><strong>Error</strong> The submitted notification rule data was not sent with the JSONAPI MIME type <code class="prettyprint">application/vnd.api+json</code>.</td>
</tr>
<tr>
<td>409</td>
<td><strong>Error</strong> Notification rules with ids matching those submitted were found.</td>
</tr>
<tr>
<td>422</td>
<td><strong>Error</strong> The submitted notification rule data did not conform to the provided specification.</td>
</tr>
</tbody></table>

<h2 id="get-notification-rules">Get notification rules</h2>
<pre class="highlight shell">curl http://localhost:3081/notification_rules

<span class="c"># or</span>
curl http://localhost:3081/notification_rules/30fd36ae-3922-4957-ae3e-c8f6dd27e543

<span class="c"># or</span>
curl http://localhost:3081/notification_rules/30fd36ae-3922-4957-ae3e-c8f6dd27e543,bfd8be61-3d80-4b95-94df-6e77183ce4e3
</pre>
<pre class="highlight ruby"><span class="nb">require</span> <span class="s1">'flapjack-diner'</span>
<span class="no">Flapjack</span><span class="o">::</span><span class="no">Diner</span><span class="p">.</span><span class="nf">base_uri</span><span class="p">(</span><span class="s1">'localhost:3081'</span><span class="p">)</span>

<span class="no">Flapjack</span><span class="o">::</span><span class="no">Diner</span><span class="p">.</span><span class="nf">notification_rules</span>

<span class="c1"># or</span>
<span class="no">Flapjack</span><span class="o">::</span><span class="no">Diner</span><span class="p">.</span><span class="nf">notification_rules</span><span class="p">(</span>
  <span class="s1">'30fd36ae-3922-4957-ae3e-c8f6dd27e543'</span>
<span class="p">)</span>

<span class="c1"># or</span>
<span class="no">Flapjack</span><span class="o">::</span><span class="no">Diner</span><span class="p">.</span><span class="nf">notification_rules</span><span class="p">(</span>
  <span class="s1">'30fd36ae-3922-4957-ae3e-c8f6dd27e543'</span><span class="p">,</span>
  <span class="s1">'bfd8be61-3d80-4b95-94df-6e77183ce4e3'</span>
<span class="p">)</span>
</pre>

<blockquote>
<p>The commands return JSON structured like this, which is broken up by Flapjack::Diner into its constituent hashes:</p>
</blockquote>
<pre class="highlight json"><span class="p">{</span><span class="w">
  </span><span class="s2">"notification_rules"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"entities"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"foo-app-01.example.com"</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="s2">"regex_entities"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"^foo-\S{3}-\d{2}.example.com$"</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="s2">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"database"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"physical"</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="s2">"regex_tags"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
      </span><span class="s2">"time_restrictions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"start_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2013-01-28 08:00:00"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"end_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2013-01-28 18:00:00"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"rrules"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="p">{</span><span class="w">
              </span><span class="s2">"validations"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"day"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">]</span><span class="w">
              </span><span class="p">},</span><span class="w">
              </span><span class="s2">"rule_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Weekly"</span><span class="p">,</span><span class="w">
              </span><span class="s2">"interval"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
              </span><span class="s2">"week_start"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">],</span><span class="w">
          </span><span class="s2">"exrules"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
          </span><span class="s2">"rtimes"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
          </span><span class="s2">"extimes"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="s2">"unknown_media"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
      </span><span class="s2">"warning_media"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"email"</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="s2">"critical_media"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"sms"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"email"</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="s2">"unknown_blackhole"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="s2">"warning_blackhole"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="s2">"critical_blackhole"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="s2">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"contacts"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"12"</span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">GET /notification_rules</code></p>

<p><strong>or</strong></p>

<p><code class="prettyprint">GET /media/ID[,ID,ID...]</code></p>

<h3 id="query-parameters">Query Parameters</h3>

<p>None.</p>

<h3 id="http-return-codes">HTTP Return Codes</h3>

<table><thead>
<tr>
<th>Return code</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td>OK</td>
</tr>
</tbody></table>

<h2 id="update-notification-rules">Update notification rules</h2>

<p>Update one or more attributes for one or more notification rules.</p>
<pre class="highlight shell">curl -w <span class="s1">'response: %{http_code} \n'</span> -X PATCH -H <span class="s2">"Content-Type: application/json-patch+json"</span> -d <span class="se">\</span>
<span class="s1">'[
  {"op"    : "replace",
   "path"  : "/notification_rules/0/tags",
   "value" : ["leased", "small"]}
]'</span> <span class="se">\</span>
 <span class="s1">'http://localhost:3081/notification_rules/a82fe0ec-1972-4c12-9732-6ebec9dcf479'</span>
</pre>
<pre class="highlight ruby"><span class="nb">require</span> <span class="s1">'flapjack-diner'</span>
<span class="no">Flapjack</span><span class="o">::</span><span class="no">Diner</span><span class="p">.</span><span class="nf">base_uri</span><span class="p">(</span><span class="s1">'localhost:3081'</span><span class="p">)</span>

<span class="no">Flapjack</span><span class="o">::</span><span class="no">Diner</span><span class="p">.</span><span class="nf">update_notification_rules</span><span class="p">(</span>
  <span class="s1">'a82fe0ec-1972-4c12-9732-6ebec9dcf479'</span><span class="p">,</span>
  <span class="ss">:tags</span> <span class="o">=&gt;</span> <span class="o">[</span> <span class="s1">'leased'</span><span class="p">,</span> <span class="s1">'small'</span> <span class="o">]</span>
<span class="p">)</span>
</pre>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">PATCH /notification_rules/ID[,ID,ID...]</code></p>

<h3 id="query-parameters">Query Parameters</h3>

<p>Parameters sent for notification rule updates must form a valid <a href="http://tools.ietf.org/html/rfc6902">JSON Patch (RFC 6902)</a> document. This is comprised of a bare JSON array of JSON-Patch operation objects, which have three members:</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>op</td>
<td>String</td>
<td>may only be <em>replace</em></td>
</tr>
<tr>
<td>path</td>
<td>String</td>
<td>&ldquo;/notification_rules/0/ATTRIBUTE&rdquo; (e.g. &lsquo;warning_blackhole&rsquo;)</td>
</tr>
<tr>
<td>value</td>
<td>-&gt;</td>
<td>a value of the correct data type for the attribute in the path</td>
</tr>
</tbody></table>

<h3 id="http-return-codes">HTTP Return Codes</h3>

<table><thead>
<tr>
<th>Return code</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>204</td>
<td>The submitted notification rule updates were made successfully. No content is returned.</td>
</tr>
<tr>
<td>404</td>
<td>Notification rules could not be found for one or more of the provided ids. No notification rules were altered by this request.</td>
</tr>
<tr>
<td>405</td>
<td><strong>Error</strong> The submitted notification rule data was not sent with the JSON-Patch MIME type <code class="prettyprint">application/json-patch+json</code>.</td>
</tr>
</tbody></table>

<h2 id="delete-notification-rules">Delete notification rules</h2>

<p>Delete one or more notification rules.</p>
<pre class="highlight shell">curl -w <span class="s1">'response: %{http_code} \n'</span> -X DELETE <span class="se">\</span>
  <span class="s1">'http://localhost:3081/notification_rules/2caf75f4-0043-4884-b2e9-dfb418e275ba'</span>

<span class="c"># or</span>
curl -w <span class="s1">'response: %{http_code} \n'</span> -X DELETE <span class="se">\</span>
  <span class="s1">'http://localhost:3081/notification_rules/2caf75f4-0043-4884-b2e9-dfb418e275ba,bd0dd8b6-2c72-49da-9b83-e0b283ec1931'</span>
</pre>
<pre class="highlight ruby"><span class="nb">require</span> <span class="s1">'flapjack-diner'</span>
<span class="no">Flapjack</span><span class="o">::</span><span class="no">Diner</span><span class="p">.</span><span class="nf">base_uri</span><span class="p">(</span><span class="s1">'localhost:3081'</span><span class="p">)</span>

<span class="no">Flapjack</span><span class="o">::</span><span class="no">Diner</span><span class="p">.</span><span class="nf">delete_notification_rules</span><span class="p">(</span>
  <span class="s1">'2caf75f4-0043-4884-b2e9-dfb418e275ba'</span>
<span class="p">)</span>

<span class="c1"># or</span>
<span class="no">Flapjack</span><span class="o">::</span><span class="no">Diner</span><span class="p">.</span><span class="nf">delete_notification_rules</span><span class="p">(</span>
  <span class="s1">'2caf75f4-0043-4884-b2e9-dfb418e275ba'</span><span class="p">,</span>
  <span class="s1">'bd0dd8b6-2c72-49da-9b83-e0b283ec1931'</span>
<span class="p">)</span>
</pre>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">DELETE /notification_rules/ID[,ID,ID...]</code></p>

<h3 id="query-parameters">Query Parameters</h3>

<p>None.</p>

<h3 id="http-return-codes">HTTP Return Codes</h3>

<table><thead>
<tr>
<th>Return code</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>204</td>
<td>The notification rule(s) were deleted</td>
</tr>
<tr>
<td>404</td>
<td>Notification rules could not be found for one or more of the provided ids. No notification rules were deleted by this request.</td>
</tr>
</tbody></table>

  <h1 id="entities">Entities</h1>

<p>The Entity resource has the following attributes:</p>

<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td>String</td>
<td></td>
</tr>
<tr>
<td>id</td>
<td>String</td>
<td></td>
</tr>
<tr>
<td>tags</td>
<td>Array[String]</td>
<td></td>
</tr>
<tr>
<td>contacts</td>
<td>Array[Contact]</td>
<td></td>
</tr>
</tbody></table>

<h2 id="create-entities">Create entities</h2>
<pre class="highlight shell">curl -w <span class="s1">'response: %{http_code} \n'</span> -X POST -H <span class="s2">"Content-type: application/vnd.api+json"</span> -d <span class="se">\</span>
 <span class="s1">'{
    "entities": [
      {
        "id": "825",
        "name": "foo.example.com",
        "tags": [
          "foo"
        ]
      }
    ]
  }'</span> <span class="se">\</span>
 http://localhost:3081/entities
</pre>
<pre class="highlight ruby"><span class="nb">require</span> <span class="s1">'flapjack-diner'</span>
<span class="no">Flapjack</span><span class="o">::</span><span class="no">Diner</span><span class="p">.</span><span class="nf">base_uri</span><span class="p">(</span><span class="s1">'localhost:3081'</span><span class="p">)</span>

<span class="no">Flapjack</span><span class="o">::</span><span class="no">Diner</span><span class="p">.</span><span class="nf">create_entities</span><span class="p">(</span><span class="o">[</span>
  <span class="p">{</span>
    <span class="s1">'id'</span>   <span class="o">=&gt;</span> <span class="s1">'825'</span><span class="p">,</span>
    <span class="s1">'name'</span> <span class="o">=&gt;</span> <span class="s1">'foo.example.com'</span><span class="p">,</span>
    <span class="s1">'tags'</span> <span class="o">=&gt;</span> <span class="o">[</span> <span class="s1">'foo'</span> <span class="o">]</span>
  <span class="p">}</span>
<span class="o">]</span><span class="p">)</span>
</pre>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">POST /entities</code></p>

<h3 id="query-parameters">Query Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>entities</td>
<td>Array[Entity]</td>
<td>An array of Entity resources to create.</td>
</tr>
</tbody></table>

<h3 id="http-return-codes">HTTP Return Codes</h3>

<table><thead>
<tr>
<th>Return code</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>201</td>
<td>The submitted entities were created successfully.</td>
</tr>
<tr>
<td>405</td>
<td><strong>Error</strong> The submitted entity data was not sent with the JSONAPI MIME type <code class="prettyprint">application/vnd.api+json</code>.</td>
</tr>
<tr>
<td>409</td>
<td><strong>Error</strong> Entities with ids matching those submitted were found.</td>
</tr>
<tr>
<td>422</td>
<td><strong>Error</strong> The submitted entity data did not conform to the provided specification.</td>
</tr>
</tbody></table>

<h2 id="get-entities">Get entities</h2>

<p>If no entity ids are provided then all entities will be returned; if entity ids
are provided then only the entities matching those ids will be returned.</p>
<pre class="highlight shell">curl http://localhost:3081/entities

<span class="c"># or</span>
curl http://localhost:3081/entities/17

<span class="c"># or</span>
curl http://localhost:3081/entities/17,25
</pre>
<pre class="highlight ruby"><span class="nb">require</span> <span class="s1">'flapjack-diner'</span>
<span class="no">Flapjack</span><span class="o">::</span><span class="no">Diner</span><span class="p">.</span><span class="nf">base_uri</span><span class="p">(</span><span class="s1">'localhost:3081'</span><span class="p">)</span>

<span class="no">Flapjack</span><span class="o">::</span><span class="no">Diner</span><span class="p">.</span><span class="nf">entities</span>

<span class="c1"># or</span>
<span class="no">Flapjack</span><span class="o">::</span><span class="no">Diner</span><span class="p">.</span><span class="nf">entities</span><span class="p">(</span><span class="s1">'17'</span><span class="p">)</span>

<span class="c1"># or</span>
<span class="no">Flapjack</span><span class="o">::</span><span class="no">Diner</span><span class="p">.</span><span class="nf">entities</span><span class="p">(</span><span class="s1">'17'</span><span class="p">,</span> <span class="s1">'25'</span><span class="p">)</span>
</pre>

<blockquote>
<p>The commands return JSON structured like this, which is broken up by Flapjack::Diner into its constituent hashes:</p>
</blockquote>
<pre class="highlight json"><span class="p">{</span><span class="w">
  </span><span class="s2">"entities"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"301"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"www.example.com"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"production"</span><span class="p">,</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="s2">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"contacts"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"5"</span><span class="p">,</span><span class="w"> </span><span class="s2">"87"</span><span class="p">,</span><span class="w"> </span><span class="s2">"123"</span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"302"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"www.example2.com"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"staging"</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="s2">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"contacts"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">GET /entities</code></p>

<p><strong>or</strong></p>

<p><code class="prettyprint">GET /entities/ID[,ID,ID...]</code></p>

<h3 id="query-parameters">Query Parameters</h3>

<p>None.</p>

<h3 id="http-return-codes">HTTP Return Codes</h3>

<table><thead>
<tr>
<th>Return code</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td>OK</td>
</tr>
</tbody></table>

<h2 id="update-entities">Update entities</h2>

<p>Update one or more attributes for one or more entity resources.</p>

<p>NB: The entity name cannot be changed in Flapjack v1.x due to limitations in the underlying data storage model. This will be addressed in future Flapjack releases.</p>
<pre class="highlight shell">curl -w <span class="s1">'response: %{http_code} \n'</span> -X PATCH -H <span class="s2">"Content-Type: application/json-patch+json"</span> -d <span class="se">\</span>
<span class="s1">'[
  {"op"    : "add",
   "path"  : "/entities/0/linked/contacts",
   "value" : '</span>352<span class="s1">'}
]'</span> <span class="se">\</span>
 <span class="s1">'http://localhost:3081/entities/157'</span>
</pre>
<pre class="highlight ruby"><span class="nb">require</span> <span class="s1">'flapjack-diner'</span>
<span class="no">Flapjack</span><span class="o">::</span><span class="no">Diner</span><span class="p">.</span><span class="nf">base_uri</span><span class="p">(</span><span class="s1">'localhost:3081'</span><span class="p">)</span>

<span class="no">Flapjack</span><span class="o">::</span><span class="no">Diner</span><span class="p">.</span><span class="nf">update_entities</span><span class="p">(</span>
  <span class="o">[</span> <span class="s1">'157'</span> <span class="o">]</span><span class="p">,</span>
  <span class="ss">:name</span>         <span class="o">=&gt;</span> <span class="s1">'www.example_com'</span><span class="p">,</span>
  <span class="ss">:add_contacts</span> <span class="o">=&gt;</span> <span class="o">[</span> <span class="s1">'352'</span> <span class="o">]</span>
<span class="p">)</span>
</pre>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">PATCH /entities/ID[,ID,ID...]</code></p>

<h3 id="query-parameters">Query Parameters</h3>

<p>Parameters sent for entity updates must form a valid <a href="http://tools.ietf.org/html/rfc6902">JSON Patch (RFC 6902)</a> document. This is comprised of a bare JSON array of JSON-Patch operation objects, which have three members:</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>op</td>
<td>String</td>
<td>one of <em>replace</em> (for attributes), <em>add</em> or <em>remove</em> (for linked objects)</td>
</tr>
<tr>
<td>path</td>
<td>String</td>
<td>&ldquo;/entities/0/ATTRIBUTE&rdquo; (e.g. &lsquo;name&rsquo;) or &ldquo;/entities/0/links/LINKED_OBJ&rdquo; (e.g. &lsquo;contacts&rsquo;)</td>
</tr>
<tr>
<td>value</td>
<td>-&gt;</td>
<td>for attributes, a value of the correct data type for that attribute; for linked objects, the String id of that object</td>
</tr>
</tbody></table>

<h3 id="http-return-codes">HTTP Return Codes</h3>

<table><thead>
<tr>
<th>Return code</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>204</td>
<td>The entities were updated successfully.</td>
</tr>
<tr>
<td>404</td>
<td><strong>Error</strong> No matching entities were found.</td>
</tr>
<tr>
<td>405</td>
<td><strong>Error</strong> The submitted entity data was not sent with the JSON-Patch MIME type <code class="prettyprint">application/json-patch+json</code>.</td>
</tr>
<tr>
<td>422</td>
<td><strong>Error</strong> The submitted entity data did not conform to the provided specification.</td>
</tr>
</tbody></table>

<h2 id="create-scheduled-maintenance-periods-on-entities">Create scheduled maintenance periods on entities</h2>
<pre class="highlight shell">curl -w <span class="s1">'response: %{http_code} \n'</span> -X POST -H <span class="s2">"Content-type: application/vnd.api+json"</span> -d <span class="se">\</span>
 <span class="s1">'{
    "scheduled_maintenances": [
      {
        "start_time" : "2014-04-09T16:03:25+09:30",
        "duration" : 3600,
        "summary" : "memory replacement"
      }
    ]
  }'</span> <span class="se">\</span>
 http://localhost:3081/scheduled_maintenances/entities/825
</pre>
<pre class="highlight ruby"><span class="nb">require</span> <span class="s1">'flapjack-diner'</span>
<span class="no">Flapjack</span><span class="o">::</span><span class="no">Diner</span><span class="p">.</span><span class="nf">base_uri</span><span class="p">(</span><span class="s1">'localhost:3081'</span><span class="p">)</span>

<span class="no">Flapjack</span><span class="o">::</span><span class="no">Diner</span><span class="p">.</span><span class="nf">create_scheduled_maintenances_entities</span><span class="p">(</span>
  <span class="s1">'825'</span><span class="p">,</span>
  <span class="ss">:start_time</span> <span class="o">=&gt;</span> <span class="s1">'2014-04-09T16:03:25+09:30'</span><span class="p">,</span>
  <span class="ss">:duration</span>   <span class="o">=&gt;</span> <span class="mi">3600</span><span class="p">,</span>
  <span class="ss">:summary</span>    <span class="o">=&gt;</span> <span class="s1">'memory replacement'</span>
<span class="p">)</span>
</pre>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">POST /scheduled_maintenances/entities/ID[,ID,ID...]</code></p>

<h3 id="query-parameters">Query Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>start_time</td>
<td>String</td>
<td>A date &amp; time in ISO 8601 format (YYYY-MM-DDThh:mm:ssZ)</td>
</tr>
<tr>
<td>duration</td>
<td>Integer</td>
<td>A length of time (in seconds) that the created scheduled maintenance periods should last.</td>
</tr>
<tr>
<td>summary</td>
<td>String</td>
<td>A summary of the reason for the maintenance period.</td>
</tr>
</tbody></table>

<h3 id="http-return-codes">HTTP Return Codes</h3>

<table><thead>
<tr>
<th>Return code</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>204</td>
<td>The submitted scheduled maintenance periods were created successfully.</td>
</tr>
<tr>
<td>403</td>
<td><strong>Error</strong> The required &lsquo;start_time&rsquo; parameter was not sent.</td>
</tr>
<tr>
<td>404</td>
<td><strong>Error</strong> No matching entities were found.</td>
</tr>
<tr>
<td>405</td>
<td><strong>Error</strong> The submitted parameters were not sent with the JSONAPI MIME type <code class="prettyprint">application/json</code>.</td>
</tr>
</tbody></table>

<h2 id="delete-scheduled-maintenance-periods-on-entities">Delete scheduled maintenance periods on entities</h2>
<pre class="highlight shell">curl -w <span class="s1">'response: %{http_code} \n'</span> -X DELETE <span class="se">\</span>
  <span class="s1">'http://localhost:3081/scheduled_maintenances/entities/34?start_time=2014-05-09T16:12:16+09:30'</span>
</pre>
<pre class="highlight ruby"><span class="nb">require</span> <span class="s1">'flapjack-diner'</span>
<span class="no">Flapjack</span><span class="o">::</span><span class="no">Diner</span><span class="p">.</span><span class="nf">base_uri</span><span class="p">(</span><span class="s1">'localhost:3081'</span><span class="p">)</span>

<span class="no">Flapjack</span><span class="o">::</span><span class="no">Diner</span><span class="p">.</span><span class="nf">delete_scheduled_maintenances_entities</span><span class="p">(</span>
  <span class="mi">34</span><span class="p">,</span>
  <span class="ss">:end_time</span> <span class="o">=&gt;</span> <span class="s1">'2014-05-09T16:12:16+09:30'</span>
<span class="p">)</span>
</pre>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">DELETE /scheduled_maintenances/entities/ID[,ID,ID...]</code></p>

<h3 id="query-parameters">Query Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>start_time</td>
<td>String</td>
<td>A date &amp; time in ISO 8601 format (YYYY-MM-DDThh:mm:ssZ)</td>
</tr>
</tbody></table>

<h3 id="http-return-codes">HTTP Return Codes</h3>

<table><thead>
<tr>
<th>Return code</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>204</td>
<td>Matching scheduled maintenance periods were deleted.</td>
</tr>
<tr>
<td>403</td>
<td><strong>Error</strong> The required &lsquo;start_time&rsquo; parameter was not sent.</td>
</tr>
<tr>
<td>404</td>
<td><strong>Error</strong> No matching entities were found.</td>
</tr>
</tbody></table>

<h2 id="create-unscheduled-maintenance-periods-on-entities">Create unscheduled maintenance periods on entities</h2>
<pre class="highlight shell">curl -w <span class="s1">'response: %{http_code} \n'</span> -X POST -H <span class="s2">"Content-type: application/vnd.api+json"</span> -d <span class="se">\</span>
 <span class="s1">'{
    "unscheduled_maintenances": [
      {
        "duration" : 3600,
        "summary" : "fixing now"
      }
    ]
  }'</span> <span class="se">\</span>
 http://localhost:3081/unscheduled_maintenances/entities/825
</pre>
<pre class="highlight ruby"><span class="nb">require</span> <span class="s1">'flapjack-diner'</span>
<span class="no">Flapjack</span><span class="o">::</span><span class="no">Diner</span><span class="p">.</span><span class="nf">base_uri</span><span class="p">(</span><span class="s1">'localhost:3081'</span><span class="p">)</span>

<span class="no">Flapjack</span><span class="o">::</span><span class="no">Diner</span><span class="p">.</span><span class="nf">create_unscheduled_maintenances_entities</span><span class="p">(</span>
  <span class="s1">'825'</span><span class="p">,</span>
  <span class="ss">:duration</span> <span class="o">=&gt;</span> <span class="mi">3600</span><span class="p">,</span>
  <span class="ss">:summary</span>  <span class="o">=&gt;</span> <span class="s1">'fixing now'</span>
<span class="p">)</span>
</pre>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">POST /unscheduled_maintenances/entities/ID[,ID,ID...]</code></p>

<h3 id="query-parameters">Query Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>duration</td>
<td>Integer</td>
<td>A length of time (in seconds) that the unscheduled maintenance period(s) should last.</td>
</tr>
<tr>
<td>summary</td>
<td>String</td>
<td>A summary of the reason for the creation of the unscheduled maintenance period(s).</td>
</tr>
</tbody></table>

<h3 id="http-return-codes">HTTP Return Codes</h3>

<table><thead>
<tr>
<th>Return code</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>204</td>
<td>The submitted unscheduled maintenance periods were created successfully.</td>
</tr>
<tr>
<td>404</td>
<td><strong>Error</strong> No matching entities were found.</td>
</tr>
<tr>
<td>405</td>
<td><strong>Error</strong> The submitted parameters were not sent with the JSONAPI MIME type <code class="prettyprint">application/json</code>.</td>
</tr>
</tbody></table>

<h2 id="update-unscheduled-maintenance-periods-on-entities">Update unscheduled maintenance periods on entities</h2>
<pre class="highlight shell">curl -w <span class="s1">'response: %{http_code} \n'</span> -X PATCH -H <span class="s2">"Content-Type: application/json-patch+json"</span> -d <span class="se">\</span>
<span class="s1">'[
  {"op"    : "replace",
   "path"  : "/unscheduled_maintenances/0/end_time",
   "value" : "2014-04-09T16:12:16+09:30"},
]'</span> <span class="se">\</span>
 <span class="s1">'http://localhost:3081/unscheduled_maintenances/entities/34'</span>
</pre>
<pre class="highlight ruby"><span class="nb">require</span> <span class="s1">'flapjack-diner'</span>
<span class="no">Flapjack</span><span class="o">::</span><span class="no">Diner</span><span class="p">.</span><span class="nf">base_uri</span><span class="p">(</span><span class="s1">'localhost:3081'</span><span class="p">)</span>

<span class="no">Flapjack</span><span class="o">::</span><span class="no">Diner</span><span class="p">.</span><span class="nf">update_unscheduled_maintenances_entities</span><span class="p">(</span>
  <span class="s1">'34'</span><span class="p">,</span>
  <span class="ss">:end_time</span> <span class="o">=&gt;</span> <span class="s1">'2014-04-09T16:12:16+09:30'</span>
<span class="p">)</span>
</pre>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">PATCH /unscheduled_maintenances/entities/ID[,ID,ID...]</code></p>

<h3 id="query-parameters">Query Parameters</h3>

<p>Parameters sent for unscheduled maintenance period updates must form a valid <a href="http://tools.ietf.org/html/rfc6902">JSON Patch (RFC 6902)</a> document. This is comprised of a bare JSON array of JSON-Patch operation objects, which have three members:</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>op</td>
<td>String</td>
<td>may only be <em>replace</em></td>
</tr>
<tr>
<td>path</td>
<td>String</td>
<td>&ldquo;/unscheduled_maintenances/0/ATTRIBUTE&rdquo; (e.g. &lsquo;end_time&rsquo;)</td>
</tr>
<tr>
<td>value</td>
<td>-&gt;</td>
<td>a value of the correct data type for the attribute in the path</td>
</tr>
</tbody></table>

<h3 id="http-return-codes">HTTP Return Codes</h3>

<table><thead>
<tr>
<th>Return code</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>204</td>
<td>Matching unscheduled maintenance periods were updated successfully. No content is returned.</td>
</tr>
<tr>
<td>404</td>
<td>Entity resources could not be found for one or more of the provided ids. No unscheduled maintenance periods were altered by this request.</td>
</tr>
<tr>
<td>405</td>
<td><strong>Error</strong> The submitted data was not sent with the JSON-Patch MIME type <code class="prettyprint">application/json-patch+json</code>.</td>
</tr>
</tbody></table>

<h2 id="create-test-notifications-on-entities">Create test notifications on entities</h2>
<pre class="highlight shell">curl -w <span class="s1">'response: %{http_code} \n'</span> -X POST -H <span class="s2">"Content-type: application/vnd.api+json"</span> -d <span class="se">\</span>
  <span class="s1">'{
    "test_notifications": [
      {
        "summary" : "testing, testing, 1, 2, 3"
      }
    ]
  }'</span> <span class="se">\</span>
 http://localhost:3081/test_notifications/entities/825
</pre>
<pre class="highlight ruby"><span class="nb">require</span> <span class="s1">'flapjack-diner'</span>
<span class="no">Flapjack</span><span class="o">::</span><span class="no">Diner</span><span class="p">.</span><span class="nf">base_uri</span><span class="p">(</span><span class="s1">'localhost:3081'</span><span class="p">)</span>

<span class="no">Flapjack</span><span class="o">::</span><span class="no">Diner</span><span class="p">.</span><span class="nf">create_test_notifications_entities</span><span class="p">(</span>
  <span class="s1">'825'</span><span class="p">,</span>
  <span class="ss">:summary</span> <span class="o">=&gt;</span> <span class="s1">'testing, testing, 1, 2, 3'</span>
<span class="p">)</span>
</pre>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">POST /test_notifications/entities/ID[,ID,ID...]</code></p>

<h3 id="query-parameters">Query Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>summary</td>
<td>String</td>
<td>A summary of the reason for the creation of the test notifications.</td>
</tr>
</tbody></table>

<h3 id="http-return-codes">HTTP Return Codes</h3>

<table><thead>
<tr>
<th>Return code</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>204</td>
<td>The submitted test notifications were created successfully.</td>
</tr>
<tr>
<td>404</td>
<td><strong>Error</strong> No matching entities were found.</td>
</tr>
<tr>
<td>405</td>
<td><strong>Error</strong> The submitted parameters were not sent with the JSONAPI MIME type <code class="prettyprint">application/json</code>.</td>
</tr>
</tbody></table>

  <h1 id="checks">Checks</h1>

<h2 id="disable-a-check">Disable a check</h2>

<p>Disable a check (by setting its enabled attribute to false). This is currently
the only supported check property for updates via the JSONAPI, due to
limitations in the underlying data storage model. This will be addressed in
future Flapjack releases.</p>

<p>(Checks are re-enabled when new events are generated for them.)</p>
<pre class="highlight shell">curl -w <span class="s1">'response: %{http_code} \n'</span> -X PATCH -H <span class="s2">"Content-Type: application/json-patch+json"</span> -d <span class="se">\</span>
<span class="s1">'[
  {"op"    : "replace",
   "path"  : "/checks/0/enabled",
   "value" : false}
]'</span> <span class="se">\</span>
 <span class="s1">'http://localhost:3081/checks/www.example.com%3APING'</span>
</pre>
<pre class="highlight ruby"><span class="nb">require</span> <span class="s1">'flapjack-diner'</span>
<span class="no">Flapjack</span><span class="o">::</span><span class="no">Diner</span><span class="p">.</span><span class="nf">base_uri</span><span class="p">(</span><span class="s1">'localhost:3081'</span><span class="p">)</span>

<span class="no">Flapjack</span><span class="o">::</span><span class="no">Diner</span><span class="p">.</span><span class="nf">update_checks</span><span class="p">(</span>
  <span class="s1">'www.example.com:PING'</span><span class="p">,</span>
  <span class="ss">:enabled</span> <span class="o">=&gt;</span> <span class="kp">false</span>
<span class="p">)</span>
</pre>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">PATCH /checks/ID[,ID,ID...]</code></p>

<h3 id="query-parameters">Query Parameters</h3>

<p>Parameters sent for check updates must form a valid <a href="http://tools.ietf.org/html/rfc6902">JSON Patch (RFC 6902)</a> document. This is comprised of a bare JSON array of JSON-Patch operation objects, which have three members:</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>op</td>
<td>String</td>
<td>&ldquo;replace&rdquo;</td>
</tr>
<tr>
<td>path</td>
<td>String</td>
<td>&ldquo;/checks/0/enabled&rdquo;</td>
</tr>
<tr>
<td>value</td>
<td>Boolean</td>
<td>true or false</td>
</tr>
</tbody></table>

<h3 id="http-return-codes">HTTP Return Codes</h3>

<table><thead>
<tr>
<th>Return code</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>204</td>
<td>The check(s) were updated successfully.</td>
</tr>
<tr>
<td>404</td>
<td><strong>Error</strong> No matching checks were found.</td>
</tr>
<tr>
<td>405</td>
<td><strong>Error</strong> The submitted check data was not sent with the JSON-Patch MIME type <code class="prettyprint">application/json-patch+json</code>.</td>
</tr>
<tr>
<td>422</td>
<td><strong>Error</strong> The submitted check data did not conform to the provided specification.</td>
</tr>
</tbody></table>

<h2 id="create-scheduled-maintenance-periods-on-checks">Create scheduled maintenance periods on checks</h2>
<pre class="highlight shell">curl -w <span class="s1">'response: %{http_code} \n'</span> -X POST -H <span class="s2">"Content-type: application/vnd.api+json"</span> -d <span class="se">\</span>
 <span class="s1">'{
    "scheduled_maintenances": [
      {
        "start_time" : "2014-04-09T16:03:25+09:30",
        "duration" : 3600,
        "summary" : "memory replacement"
      }
    ]
  }'</span> <span class="se">\</span>
 http://localhost:3081/scheduled_maintenances/checks/example.com:SSH
</pre>
<pre class="highlight ruby"><span class="nb">require</span> <span class="s1">'flapjack-diner'</span>
<span class="no">Flapjack</span><span class="o">::</span><span class="no">Diner</span><span class="p">.</span><span class="nf">base_uri</span><span class="p">(</span><span class="s1">'localhost:3081'</span><span class="p">)</span>

<span class="no">Flapjack</span><span class="o">::</span><span class="no">Diner</span><span class="p">.</span><span class="nf">create_scheduled_maintenances_checks</span><span class="p">(</span>
  <span class="s1">'example.com:SSH'</span><span class="p">,</span>
  <span class="ss">:start_time</span> <span class="o">=&gt;</span> <span class="s1">'2014-04-09T16:03:25+09:30'</span><span class="p">,</span>
  <span class="ss">:duration</span>   <span class="o">=&gt;</span> <span class="mi">3600</span><span class="p">,</span>
  <span class="ss">:summary</span>    <span class="o">=&gt;</span> <span class="s1">'memory replacement'</span>
<span class="p">)</span>
</pre>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">POST /scheduled_maintenances/checks/ID[,ID,ID...]</code></p>

<h3 id="query-parameters">Query Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>start_time</td>
<td>String</td>
<td>A date &amp; time in ISO 8601 format (YYYY-MM-DDThh:mm:ssZ)</td>
</tr>
<tr>
<td>duration</td>
<td>Integer</td>
<td>A length of time (in seconds) that the created scheduled maintenance periods should last.</td>
</tr>
<tr>
<td>summary</td>
<td>String</td>
<td>A summary of the reason for the maintenance period.</td>
</tr>
</tbody></table>

<h3 id="http-return-codes">HTTP Return Codes</h3>

<table><thead>
<tr>
<th>Return code</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>204</td>
<td>The submitted scheduled maintenance periods were created successfully.</td>
</tr>
<tr>
<td>403</td>
<td><strong>Error</strong> The required &lsquo;start_time&rsquo; parameter was not sent.</td>
</tr>
<tr>
<td>404</td>
<td><strong>Error</strong> No matching checks were found.</td>
</tr>
<tr>
<td>405</td>
<td><strong>Error</strong> The submitted parameters were not sent with the JSONAPI MIME type <code class="prettyprint">application/json</code>.</td>
</tr>
</tbody></table>

<h2 id="delete-scheduled-maintenance-periods-on-checks">Delete scheduled maintenance periods on checks</h2>
<pre class="highlight shell">curl -w <span class="s1">'response: %{http_code} \n'</span> -X DELETE <span class="se">\</span>
  <span class="s1">'http://localhost:3081/scheduled_maintenances/checks/example.com:PING?start_time=2014-05-09T16:12:16+09:30'</span>
</pre>
<pre class="highlight ruby"><span class="nb">require</span> <span class="s1">'flapjack-diner'</span>
<span class="no">Flapjack</span><span class="o">::</span><span class="no">Diner</span><span class="p">.</span><span class="nf">base_uri</span><span class="p">(</span><span class="s1">'localhost:3081'</span><span class="p">)</span>

<span class="no">Flapjack</span><span class="o">::</span><span class="no">Diner</span><span class="p">.</span><span class="nf">delete_scheduled_maintenances_checks</span><span class="p">(</span>
  <span class="s1">'example.com:PING'</span><span class="p">,</span>
  <span class="ss">:end_time</span> <span class="o">=&gt;</span> <span class="s1">'2014-05-09T16:12:16+09:30'</span>
<span class="p">)</span>
</pre>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">DELETE /scheduled_maintenances/checks/ID[,ID,ID...]</code></p>

<h3 id="query-parameters">Query Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>start_time</td>
<td>String</td>
<td>A date &amp; time in ISO 8601 format (YYYY-MM-DDThh:mm:ssZ)</td>
</tr>
</tbody></table>

<h3 id="http-return-codes">HTTP Return Codes</h3>

<table><thead>
<tr>
<th>Return code</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>204</td>
<td>Matching unscheduled maintenance periods were deleted.</td>
</tr>
<tr>
<td>403</td>
<td><strong>Error</strong> The required &lsquo;start_time&rsquo; parameter was not sent.</td>
</tr>
<tr>
<td>404</td>
<td><strong>Error</strong> No matching checks were found.</td>
</tr>
</tbody></table>

<h2 id="create-unscheduled-maintenance-periods-on-checks">Create unscheduled maintenance periods on checks</h2>
<pre class="highlight shell">curl -w <span class="s1">'response: %{http_code} \n'</span> -X POST -H <span class="s2">"Content-type: application/vnd.api+json"</span> -d <span class="se">\</span>
 <span class="s1">'{
    "unscheduled_maintenances": [
      {
        "duration" : 3600,
        "summary" : "fixing now"
      }
    ]
  }'</span> <span class="se">\</span>
 http://localhost:3081/unscheduled_maintenances/checks/example.com:HOST
</pre>
<pre class="highlight ruby"><span class="nb">require</span> <span class="s1">'flapjack-diner'</span>
<span class="no">Flapjack</span><span class="o">::</span><span class="no">Diner</span><span class="p">.</span><span class="nf">base_uri</span><span class="p">(</span><span class="s1">'localhost:3081'</span><span class="p">)</span>

<span class="no">Flapjack</span><span class="o">::</span><span class="no">Diner</span><span class="p">.</span><span class="nf">create_unscheduled_maintenances_checks</span><span class="p">(</span>
  <span class="s1">'example.com:HOST'</span><span class="p">,</span>
  <span class="ss">:duration</span> <span class="o">=&gt;</span> <span class="mi">3600</span><span class="p">,</span>
  <span class="ss">:summary</span>  <span class="o">=&gt;</span> <span class="s1">'fixing now'</span>
<span class="p">)</span>
</pre>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">POST /unscheduled_maintenances/checks/ID[,ID,ID...]</code></p>

<h3 id="query-parameters">Query Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>duration</td>
<td>Integer</td>
<td>A length of time (in seconds) that the unscheduled maintenance period(s) should last.</td>
</tr>
<tr>
<td>summary</td>
<td>String</td>
<td>A summary of the reason for the creation of the unscheduled maintenance period(s).</td>
</tr>
</tbody></table>

<h3 id="http-return-codes">HTTP Return Codes</h3>

<table><thead>
<tr>
<th>Return code</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>204</td>
<td>The submitted unscheduled maintenance periods were created successfully.</td>
</tr>
<tr>
<td>404</td>
<td><strong>Error</strong> No matching checks were found.</td>
</tr>
<tr>
<td>405</td>
<td><strong>Error</strong> The submitted parameters were not sent with the JSONAPI MIME type <code class="prettyprint">application/json</code>.</td>
</tr>
</tbody></table>

<h2 id="update-unscheduled-maintenance-periods-on-checks">Update unscheduled maintenance periods on checks</h2>
<pre class="highlight shell">curl -w <span class="s1">'response: %{http_code} \n'</span> -X PATCH -H <span class="s2">"Content-Type: application/json-patch+json"</span> -d <span class="se">\</span>
<span class="s1">'[
  {"op"    : "replace",
   "path"  : "/unscheduled_maintenances/0/end_time",
   "value" : "2014-04-09T16:12:16+09:30"},
]'</span> <span class="se">\</span>
 <span class="s1">'http://localhost:3081/unscheduled_maintenances/checks/example.com:PING'</span>
</pre>
<pre class="highlight ruby"><span class="nb">require</span> <span class="s1">'flapjack-diner'</span>
<span class="no">Flapjack</span><span class="o">::</span><span class="no">Diner</span><span class="p">.</span><span class="nf">base_uri</span><span class="p">(</span><span class="s1">'localhost:3081'</span><span class="p">)</span>

<span class="no">Flapjack</span><span class="o">::</span><span class="no">Diner</span><span class="p">.</span><span class="nf">update_unscheduled_maintenances_checks</span><span class="p">(</span>
  <span class="s1">'example.com:PING'</span><span class="p">,</span>
  <span class="ss">:end_time</span> <span class="o">=&gt;</span> <span class="s1">'2014-04-09T16:12:16+09:30'</span>
<span class="p">)</span>
</pre>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">PATCH /unscheduled_maintenances/checks/ID[,ID,ID...]</code></p>

<h3 id="query-parameters">Query Parameters</h3>

<p>Parameters sent for unscheduled maintenance period updates must form a valid <a href="http://tools.ietf.org/html/rfc6902">JSON Patch (RFC 6902)</a> document. This is comprised of a bare JSON array of JSON-Patch operation objects, which have three members:</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>op</td>
<td>String</td>
<td>may only be <em>replace</em></td>
</tr>
<tr>
<td>path</td>
<td>String</td>
<td>&ldquo;/unscheduled_maintenances/0/ATTRIBUTE&rdquo; (e.g. &lsquo;end_time&rsquo;)</td>
</tr>
<tr>
<td>value</td>
<td>-&gt;</td>
<td>a value of the correct data type for the attribute in the path</td>
</tr>
</tbody></table>

<h3 id="http-return-codes">HTTP Return Codes</h3>

<table><thead>
<tr>
<th>Return code</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>204</td>
<td>Matching unscheduled maintenance periods were updated successfully. No content is returned.</td>
</tr>
<tr>
<td>404</td>
<td>Entity/check resources could not be found for one or more of the provided ids. No unscheduled maintenance periods were altered by this request.</td>
</tr>
<tr>
<td>405</td>
<td><strong>Error</strong> The submitted data was not sent with the JSON-Patch MIME type <code class="prettyprint">application/json-patch+json</code>.</td>
</tr>
</tbody></table>

<h2 id="create-test-notifications-on-checks">Create test notifications on checks</h2>
<pre class="highlight shell">curl -w <span class="s1">'response: %{http_code} \n'</span> -X POST -H <span class="s2">"Content-type: application/vnd.api+json"</span> -d <span class="se">\</span>
 <span class="s1">'{
    "test_notifications": [
      {
        "summary" : "testing, testing, 1, 2, 3"
      }
    ]
  }'</span> <span class="se">\</span>
 http://localhost:3081/test_notifications/checks/example.com:HOST
</pre>
<pre class="highlight ruby"><span class="nb">require</span> <span class="s1">'flapjack-diner'</span>
<span class="no">Flapjack</span><span class="o">::</span><span class="no">Diner</span><span class="p">.</span><span class="nf">base_uri</span><span class="p">(</span><span class="s1">'localhost:3081'</span><span class="p">)</span>

<span class="no">Flapjack</span><span class="o">::</span><span class="no">Diner</span><span class="p">.</span><span class="nf">create_test_notifications_checks</span><span class="p">(</span>
  <span class="s1">'example.com:HOST'</span><span class="p">,</span>
  <span class="ss">:summary</span> <span class="o">=&gt;</span> <span class="s1">'testing, testing, 1, 2, 3'</span>
<span class="p">)</span>
</pre>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">POST /test_notifications/checks/ID[,ID,ID...]</code></p>

<h3 id="query-parameters">Query Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>summary</td>
<td>String</td>
<td>A summary of the reason for the creation of the test notifications.</td>
</tr>
</tbody></table>

<h3 id="http-return-codes">HTTP Return Codes</h3>

<table><thead>
<tr>
<th>Return code</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>204</td>
<td>The submitted test notifications were created successfully.</td>
</tr>
<tr>
<td>404</td>
<td><strong>Error</strong> No matching checks were found.</td>
</tr>
<tr>
<td>405</td>
<td><strong>Error</strong> The submitted parameters were not sent with the JSONAPI MIME type <code class="prettyprint">application/json</code>.</td>
</tr>
</tbody></table>

  <h1 id="reports">Reports</h1>

<h2 id="status-of-entities-or-checks">Status of entities or checks</h2>
<pre class="highlight shell">curl http://localhost:3081/status_report/entities

<span class="c"># or</span>
curl http://localhost:3081/status_report/entities/76

<span class="c"># or</span>
curl http://localhost:3081/status_report/entities/76,342

<span class="c"># or</span>
curl http://localhost:3081/status_report/checks

<span class="c"># or</span>
curl http://localhost:3081/status_report/checks/www.example.com:PING

<span class="c"># or</span>
curl http://localhost:3081/status_report/checks/www.example.com:PING,www.example2.com:SSH
</pre>
<pre class="highlight ruby"><span class="nb">require</span> <span class="s1">'flapjack-diner'</span>
<span class="no">Flapjack</span><span class="o">::</span><span class="no">Diner</span><span class="p">.</span><span class="nf">base_uri</span><span class="p">(</span><span class="s1">'localhost:3081'</span><span class="p">)</span>

<span class="no">Flapjack</span><span class="o">::</span><span class="no">Diner</span><span class="p">.</span><span class="nf">status_report_entities</span>

<span class="c1"># or</span>
<span class="no">Flapjack</span><span class="o">::</span><span class="no">Diner</span><span class="p">.</span><span class="nf">status_report_entities</span><span class="p">(</span><span class="s1">'76'</span><span class="p">)</span>

<span class="c1"># or</span>
<span class="no">Flapjack</span><span class="o">::</span><span class="no">Diner</span><span class="p">.</span><span class="nf">status_report_entities</span><span class="p">(</span><span class="s1">'76'</span><span class="p">,</span> <span class="s1">'342'</span><span class="p">)</span>

<span class="c1"># or</span>
<span class="no">Flapjack</span><span class="o">::</span><span class="no">Diner</span><span class="p">.</span><span class="nf">status_report_checks</span>

<span class="c1"># or</span>
<span class="no">Flapjack</span><span class="o">::</span><span class="no">Diner</span><span class="p">.</span><span class="nf">status_report_checks</span><span class="p">(</span>
  <span class="s1">'www.example.com:PING'</span>
<span class="p">)</span>

<span class="c1"># or</span>
<span class="no">Flapjack</span><span class="o">::</span><span class="no">Diner</span><span class="p">.</span><span class="nf">status_report_checks</span><span class="p">(</span>
  <span class="s1">'www.example.com:PING'</span><span class="p">,</span>
  <span class="s1">'www.example2.com:SSH'</span>
<span class="p">)</span>
</pre>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">GET /status_report/entities</code></p>

<p>or</p>

<p><code class="prettyprint">GET /status_report/entities/ID[,ID,ID...]</code></p>

<p>or</p>

<p><code class="prettyprint">GET /status_report/checks</code></p>

<p>or</p>

<p><code class="prettyprint">GET /status_report/checks/ID[,ID,ID...]</code></p>

<h3 id="query-parameters">Query Parameters</h3>

<p>None.</p>

<h3 id="http-return-codes">HTTP Return Codes</h3>

<table><thead>
<tr>
<th>Return code</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td>OK</td>
</tr>
</tbody></table>

<h2 id="unscheduled-maintenance-periods-of-entities-or-checks">Unscheduled maintenance periods of entities or checks</h2>
<pre class="highlight shell">curl http://localhost:3081/unscheduled_maintenance_report/entities

<span class="c"># or</span>
curl http://localhost:3081/unscheduled_maintenance_report/entities/76

<span class="c"># or</span>
curl http://localhost:3081/unscheduled_maintenance_report/entities/76,342

<span class="c"># or</span>
curl http://localhost:3081/unscheduled_maintenance_report/checks

<span class="c"># or</span>
curl http://localhost:3081/unscheduled_maintenance_report/checks/www.example.com:PING

<span class="c"># or</span>
curl http://localhost:3081/unscheduled_maintenance_report/checks/www.example.com:PING,www.example2.com:SSH
</pre>
<pre class="highlight ruby"><span class="nb">require</span> <span class="s1">'flapjack-diner'</span>
<span class="no">Flapjack</span><span class="o">::</span><span class="no">Diner</span><span class="p">.</span><span class="nf">base_uri</span><span class="p">(</span><span class="s1">'localhost:3081'</span><span class="p">)</span>

<span class="no">Flapjack</span><span class="o">::</span><span class="no">Diner</span><span class="p">.</span><span class="nf">unscheduled_maintenance_report_entities</span>

<span class="c1"># or</span>
<span class="no">Flapjack</span><span class="o">::</span><span class="no">Diner</span><span class="p">.</span><span class="nf">unscheduled_maintenance_report_entities</span><span class="p">(</span><span class="s1">'76'</span><span class="p">)</span>

<span class="c1"># or</span>
<span class="no">Flapjack</span><span class="o">::</span><span class="no">Diner</span><span class="p">.</span><span class="nf">unscheduled_maintenance_report_entities</span><span class="p">(</span><span class="s1">'76'</span><span class="p">,</span> <span class="s1">'342'</span><span class="p">)</span>

<span class="c1"># or</span>
<span class="no">Flapjack</span><span class="o">::</span><span class="no">Diner</span><span class="p">.</span><span class="nf">unscheduled_maintenance_report_checks</span>

<span class="c1"># or</span>
<span class="no">Flapjack</span><span class="o">::</span><span class="no">Diner</span><span class="p">.</span><span class="nf">unscheduled_maintenance_report_checks</span><span class="p">(</span>
  <span class="s1">'www.example.com:PING'</span>
<span class="p">)</span>

<span class="c1"># or</span>
<span class="no">Flapjack</span><span class="o">::</span><span class="no">Diner</span><span class="p">.</span><span class="nf">unscheduled_maintenance_report_checks</span><span class="p">(</span>
  <span class="s1">'www.example.com:PING'</span><span class="p">,</span>
  <span class="s1">'www.example2.com:SSH'</span>
<span class="p">)</span>
</pre>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">GET /unscheduled_maintenance_report/entities</code></p>

<p>or</p>

<p><code class="prettyprint">GET /unscheduled_maintenance_report/entities/ID[,ID,ID...]</code></p>

<p>or</p>

<p><code class="prettyprint">GET /unscheduled_maintenance_report/checks</code></p>

<p>or</p>

<p><code class="prettyprint">GET /unscheduled_maintenance_report/checks/ID[,ID,ID...]</code></p>

<h3 id="query-parameters">Query Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>start_time</td>
<td>String</td>
<td>A date &amp; time in ISO 8601 format (YYYY-MM-DDThh:mm:ssZ)</td>
</tr>
<tr>
<td>end_time</td>
<td>String</td>
<td>A date &amp; time in ISO 8601 format (YYYY-MM-DDThh:mm:ssZ)</td>
</tr>
</tbody></table>

<h3 id="http-return-codes">HTTP Return Codes</h3>

<table><thead>
<tr>
<th>Return code</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td>OK</td>
</tr>
</tbody></table>

<h2 id="scheduled-maintenance-periods-of-entities-or-checks">Scheduled maintenance periods of entities or checks</h2>
<pre class="highlight shell">curl http://localhost:3081/scheduled_maintenance_report/entities/

<span class="c"># or</span>
curl http://localhost:3081/scheduled_maintenance_report/entities/76

<span class="c"># or</span>
curl http://localhost:3081/scheduled_maintenance_report/entities/76,342

<span class="c"># or</span>
curl http://localhost:3081/scheduled_maintenance_report/checks/

<span class="c"># or</span>
curl http://localhost:3081/scheduled_maintenance_report/checks/www.example.com:PING

<span class="c"># or</span>
curl http://localhost:3081/scheduled_maintenance_report/checks/www.example.com:PING,www.example2.com:SSH
</pre>
<pre class="highlight ruby"><span class="nb">require</span> <span class="s1">'flapjack-diner'</span>
<span class="no">Flapjack</span><span class="o">::</span><span class="no">Diner</span><span class="p">.</span><span class="nf">base_uri</span><span class="p">(</span><span class="s1">'localhost:3081'</span><span class="p">)</span>

<span class="no">Flapjack</span><span class="o">::</span><span class="no">Diner</span><span class="p">.</span><span class="nf">scheduled_maintenance_report_entities</span>

<span class="c1"># or</span>
<span class="no">Flapjack</span><span class="o">::</span><span class="no">Diner</span><span class="p">.</span><span class="nf">scheduled_maintenance_report_entities</span><span class="p">(</span><span class="s1">'76'</span><span class="p">)</span>

<span class="c1"># or</span>
<span class="no">Flapjack</span><span class="o">::</span><span class="no">Diner</span><span class="p">.</span><span class="nf">scheduled_maintenance_report_entities</span><span class="p">(</span><span class="s1">'76'</span><span class="p">,</span> <span class="s1">'342'</span><span class="p">)</span>

<span class="c1"># or</span>
<span class="no">Flapjack</span><span class="o">::</span><span class="no">Diner</span><span class="p">.</span><span class="nf">scheduled_maintenance_report_checks</span>

<span class="c1"># or</span>
<span class="no">Flapjack</span><span class="o">::</span><span class="no">Diner</span><span class="p">.</span><span class="nf">scheduled_maintenance_report_checks</span><span class="p">(</span>
  <span class="s1">'www.example.com:PING'</span>
<span class="p">)</span>

<span class="c1"># or</span>
<span class="no">Flapjack</span><span class="o">::</span><span class="no">Diner</span><span class="p">.</span><span class="nf">scheduled_maintenance_report_checks</span><span class="p">(</span>
  <span class="s1">'www.example.com:PING'</span><span class="p">,</span>
  <span class="s1">'www.example2.com:SSH'</span>
<span class="p">)</span>
</pre>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">GET /scheduled_maintenance_report/entities</code></p>

<p>or</p>

<p><code class="prettyprint">GET /scheduled_maintenance_report/entities/ID[,ID,ID...]</code></p>

<p>or</p>

<p><code class="prettyprint">GET /scheduled_maintenance_report/checks</code></p>

<p>or</p>

<p><code class="prettyprint">GET /scheduled_maintenance_report/checks/ID[,ID,ID...]</code></p>

<h3 id="query-parameters">Query Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>start_time</td>
<td>String</td>
<td>A date &amp; time in ISO 8601 format (YYYY-MM-DDThh:mm:ssZ)</td>
</tr>
<tr>
<td>end_time</td>
<td>String</td>
<td>A date &amp; time in ISO 8601 format (YYYY-MM-DDThh:mm:ssZ)</td>
</tr>
</tbody></table>

<h3 id="http-return-codes">HTTP Return Codes</h3>

<table><thead>
<tr>
<th>Return code</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td>OK</td>
</tr>
</tbody></table>

<h2 id="outages-of-entities-or-checks">Outages of entities or checks</h2>

<p>An outage on a check is a period of time for which the check was failing.</p>
<pre class="highlight shell">curl http://localhost:3081/outage_report/entities

<span class="c"># or</span>
curl http://localhost:3081/outage_report/entities/76

<span class="c"># or</span>
curl http://localhost:3081/outage_report/entities/76,342

<span class="c"># or</span>
curl http://localhost:3081/outage_report/checks

<span class="c"># or</span>
curl http://localhost:3081/outage_report/checks/www.example.com:PING

<span class="c"># or</span>
curl http://localhost:3081/outage_report/checks/www.example.com:PING,www.example2.com:SSH
</pre>
<pre class="highlight ruby"><span class="nb">require</span> <span class="s1">'flapjack-diner'</span>
<span class="no">Flapjack</span><span class="o">::</span><span class="no">Diner</span><span class="p">.</span><span class="nf">base_uri</span><span class="p">(</span><span class="s1">'localhost:3081'</span><span class="p">)</span>

<span class="no">Flapjack</span><span class="o">::</span><span class="no">Diner</span><span class="p">.</span><span class="nf">outage_report_entities</span>

<span class="c1"># or</span>
<span class="no">Flapjack</span><span class="o">::</span><span class="no">Diner</span><span class="p">.</span><span class="nf">outage_report_entities</span><span class="p">(</span><span class="s1">'76'</span><span class="p">)</span>

<span class="c1"># or</span>
<span class="no">Flapjack</span><span class="o">::</span><span class="no">Diner</span><span class="p">.</span><span class="nf">outage_report_entities</span><span class="p">(</span><span class="s1">'76'</span><span class="p">,</span> <span class="s1">'342'</span><span class="p">)</span>

<span class="c1"># or</span>
<span class="no">Flapjack</span><span class="o">::</span><span class="no">Diner</span><span class="p">.</span><span class="nf">outage_report_checks</span>

<span class="c1"># or</span>
<span class="no">Flapjack</span><span class="o">::</span><span class="no">Diner</span><span class="p">.</span><span class="nf">outage_report_checks</span><span class="p">(</span>
  <span class="s1">'www.example.com:PING'</span>
<span class="p">)</span>

<span class="c1"># or</span>
<span class="no">Flapjack</span><span class="o">::</span><span class="no">Diner</span><span class="p">.</span><span class="nf">outage_report_checks</span><span class="p">(</span>
  <span class="s1">'www.example.com:PING'</span><span class="p">,</span>
  <span class="s1">'www.example2.com:SSH'</span>
<span class="p">)</span>
</pre>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">GET /outage_report/entities</code></p>

<p>or</p>

<p><code class="prettyprint">GET /outage_report/entities/ID[,ID,ID...]</code></p>

<p>or</p>

<p><code class="prettyprint">GET /outage_report/checks</code></p>

<p>or</p>

<p><code class="prettyprint">GET /outage_report/checks/ID[,ID,ID...]</code></p>

<h3 id="query-parameters">Query Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>start_time</td>
<td>String</td>
<td>A date &amp; time in ISO 8601 format (YYYY-MM-DDThh:mm:ssZ)</td>
</tr>
<tr>
<td>end_time</td>
<td>String</td>
<td>A date &amp; time in ISO 8601 format (YYYY-MM-DDThh:mm:ssZ)</td>
</tr>
</tbody></table>

<h3 id="http-return-codes">HTTP Return Codes</h3>

<table><thead>
<tr>
<th>Return code</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td>OK</td>
</tr>
</tbody></table>

<h2 id="downtime-of-entities-or-checks">Downtime of entities or checks</h2>

<p>A downtime on a check is a period of time when the check is failing and there&rsquo;s no scheduled maintenance.</p>
<pre class="highlight shell">curl http://localhost:3081/downtime_report/entities

<span class="c"># or</span>
curl http://localhost:3081/downtime_report/entities/76

<span class="c"># or</span>
curl http://localhost:3081/downtime_report/entities/76,342

<span class="c"># or</span>
curl http://localhost:3081/downtime_report/checks

<span class="c"># or</span>
curl http://localhost:3081/downtime_report/checks/www.example.com:PING

<span class="c"># or</span>
curl http://localhost:3081/downtime_report/checks/www.example.com:PING,www.example2.com:SSH
</pre>
<pre class="highlight ruby"><span class="nb">require</span> <span class="s1">'flapjack-diner'</span>
<span class="no">Flapjack</span><span class="o">::</span><span class="no">Diner</span><span class="p">.</span><span class="nf">base_uri</span><span class="p">(</span><span class="s1">'localhost:3081'</span><span class="p">)</span>

<span class="no">Flapjack</span><span class="o">::</span><span class="no">Diner</span><span class="p">.</span><span class="nf">downtime_report_entities</span>

<span class="c1"># or</span>
<span class="no">Flapjack</span><span class="o">::</span><span class="no">Diner</span><span class="p">.</span><span class="nf">downtime_report_entities</span><span class="p">(</span><span class="s1">'76'</span><span class="p">)</span>

<span class="c1"># or</span>
<span class="no">Flapjack</span><span class="o">::</span><span class="no">Diner</span><span class="p">.</span><span class="nf">downtime_report_entities</span><span class="p">(</span><span class="s1">'76'</span><span class="p">,</span> <span class="s1">'342'</span><span class="p">)</span>

<span class="c1"># or</span>
<span class="no">Flapjack</span><span class="o">::</span><span class="no">Diner</span><span class="p">.</span><span class="nf">downtime_report_checks</span>

<span class="c1"># or</span>
<span class="no">Flapjack</span><span class="o">::</span><span class="no">Diner</span><span class="p">.</span><span class="nf">downtime_report_checks</span><span class="p">(</span>
  <span class="s1">'www.example.com:PING'</span>
<span class="p">)</span>

<span class="c1"># or</span>
<span class="no">Flapjack</span><span class="o">::</span><span class="no">Diner</span><span class="p">.</span><span class="nf">downtime_report_checks</span><span class="p">(</span>
  <span class="s1">'www.example.com:PING'</span><span class="p">,</span>
  <span class="s1">'www.example2.com:SSH'</span>
<span class="p">)</span>
</pre>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">GET /downtime_report/entities</code></p>

<p>or</p>

<p><code class="prettyprint">GET /downtime_report/entities/ID[,ID,ID...]</code></p>

<p>or</p>

<p><code class="prettyprint">GET /downtime_report/checks</code></p>

<p>or</p>

<p><code class="prettyprint">GET /downtime_report/checks/ID[,ID,ID...]</code></p>

<h3 id="query-parameters">Query Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>start_time</td>
<td>String</td>
<td>A date &amp; time in ISO 8601 format (YYYY-MM-DDThh:mm:ssZ)</td>
</tr>
<tr>
<td>end_time</td>
<td>String</td>
<td>A date &amp; time in ISO 8601 format (YYYY-MM-DDThh:mm:ssZ)</td>
</tr>
</tbody></table>

<h3 id="http-return-codes">HTTP Return Codes</h3>

<table><thead>
<tr>
<th>Return code</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td>OK</td>
</tr>
</tbody></table>


      </div>
      <div class="dark-box">
        <div id="lang-selector">
          
            
              
                <a href="#" data-language-name="shell">shell</a>
              
            
              
                <a href="#" data-language-name="ruby">ruby</a>
              
            
          
        </div>
      </div>
    </div>
  </body>
</html>
